<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guía: Problema de Tres Cuerpos - Math Visual Lab</title>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,300;0,400;0,600;1,400&family=Inter:wght@400;500;600&family=Fira+Code:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0a0f;
            --bg-secondary: #12121a;
            --bg-tertiary: #1a1a24;
            --text-primary: #e4e4e8;
            --text-secondary: #9999a8;
            --accent: #a855f7;
            --accent-dim: rgba(168, 85, 247, 0.15);
            --cyan: #22d3ee;
            --red: #ef4444;
            --green: #22c55e;
            --blue: #3b82f6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Crimson Pro', Georgia, serif;
            font-size: 1.125rem;
            line-height: 1.75;
            color: var(--text-primary);
            background: var(--bg-primary);
            padding: 2rem;
            max-width: 900px;
            margin: 0 auto;
        }

        header {
            margin-bottom: 3rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid var(--bg-tertiary);
        }

        .breadcrumb {
            font-family: 'Inter', sans-serif;
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
        }

        .breadcrumb a {
            color: var(--accent);
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        h1 {
            font-family: 'Inter', sans-serif;
            font-size: 2.5rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--accent);
            line-height: 1.2;
        }

        h2 {
            font-family: 'Inter', sans-serif;
            font-size: 1.5rem;
            font-weight: 500;
            margin: 3rem 0 1.5rem;
            color: var(--text-primary);
        }

        h3 {
            font-family: 'Inter', sans-serif;
            font-size: 1.2rem;
            font-weight: 500;
            margin: 2rem 0 1rem;
            color: var(--accent);
        }

        p {
            margin-bottom: 1.25rem;
        }

        .intro {
            font-size: 1.3rem;
            color: var(--text-secondary);
            border-left: 3px solid var(--accent);
            padding-left: 1.5rem;
            margin: 2rem 0;
        }

        .observation-box {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            border: 1px solid var(--bg-tertiary);
        }

        .observation-box h3 {
            margin-top: 0;
            color: var(--cyan);
        }

        .key-concept {
            background: linear-gradient(135deg, var(--accent-dim), transparent);
            border-left: 3px solid var(--accent);
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0 8px 8px 0;
        }

        .equation-box {
            background: var(--bg-secondary);
            border: 1px solid var(--accent);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            text-align: center;
        }

        .equation {
            font-family: 'Fira Code', monospace;
            font-size: 1.3rem;
            color: var(--cyan);
            margin: 1rem 0;
            letter-spacing: 0.02em;
        }

        .equation-label {
            font-family: 'Inter', sans-serif;
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-top: 1rem;
        }

        code {
            font-family: 'Fira Code', monospace;
            font-size: 0.9em;
            background: var(--bg-tertiary);
            padding: 0.2em 0.5em;
            border-radius: 4px;
            color: var(--cyan);
        }

        .concept-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .concept-card {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid var(--bg-tertiary);
            transition: border-color 0.3s;
        }

        .concept-card:hover {
            border-color: var(--accent);
        }

        .concept-card h4 {
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            font-weight: 500;
            color: var(--accent);
            margin-bottom: 0.75rem;
        }

        .concept-card p {
            font-size: 0.95rem;
            color: var(--text-secondary);
            margin: 0;
        }

        .experiment-section {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            border: 1px solid var(--bg-tertiary);
        }

        .experiment-section h3 {
            color: var(--cyan);
            margin-top: 0;
        }

        ol, ul {
            margin: 1rem 0 1rem 1.5rem;
        }

        li {
            margin-bottom: 0.75rem;
        }

        .history-box {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            border-left: 3px solid var(--accent);
        }

        .history-box h3 {
            margin-top: 0;
        }

        .timeline {
            position: relative;
            padding-left: 2rem;
            margin: 1.5rem 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--bg-tertiary);
        }

        .timeline-item {
            position: relative;
            margin-bottom: 1.5rem;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -2rem;
            top: 0.5rem;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--accent);
            transform: translateX(-4px);
        }

        .timeline-year {
            font-family: 'Inter', sans-serif;
            font-size: 0.85rem;
            color: var(--accent);
            font-weight: 500;
        }

        .connections-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .connection-card {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid var(--bg-tertiary);
        }

        .connection-card h4 {
            font-family: 'Inter', sans-serif;
            font-size: 0.9rem;
            color: var(--cyan);
            margin-bottom: 0.5rem;
        }

        .further-reading {
            background: var(--bg-tertiary);
            border-radius: 12px;
            padding: 2rem;
            margin: 3rem 0;
        }

        .further-reading h3 {
            margin-top: 0;
            color: var(--text-primary);
        }

        .further-reading ul {
            list-style: none;
            margin-left: 0;
        }

        .further-reading li::before {
            content: '→ ';
            color: var(--accent);
        }

        footer {
            margin-top: 4rem;
            padding-top: 2rem;
            border-top: 1px solid var(--bg-tertiary);
            text-align: center;
        }

        footer a {
            color: var(--accent);
            text-decoration: none;
            font-family: 'Inter', sans-serif;
            font-size: 0.9rem;
        }

        footer a:hover {
            text-decoration: underline;
        }

        .orbit-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }

        .orbit-card {
            background: var(--bg-secondary);
            border-radius: 8px;
            padding: 1.25rem;
            text-align: center;
            border: 1px solid var(--bg-tertiary);
        }

        .orbit-card h5 {
            font-family: 'Inter', sans-serif;
            font-size: 0.95rem;
            color: var(--accent);
            margin-bottom: 0.5rem;
        }

        .orbit-card p {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin: 0;
        }

        .body-colors {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            margin-bottom: 0.5rem;
        }

        .body-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .conservation-box {
            background: linear-gradient(135deg, rgba(34, 211, 238, 0.1), rgba(168, 85, 247, 0.1));
            border-radius: 12px;
            padding: 1.5rem;
            margin: 2rem 0;
            border: 1px solid var(--cyan);
        }

        .conservation-box h4 {
            font-family: 'Inter', sans-serif;
            color: var(--cyan);
            margin-bottom: 1rem;
        }

        .conservation-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .conservation-item {
            background: var(--bg-tertiary);
            padding: 0.75rem;
            border-radius: 8px;
        }

        .conservation-item strong {
            color: var(--accent);
        }
    </style>
</head>
<body>
    <header>
        <nav class="breadcrumb">
            <a href="../index.html">Math Visual Lab</a> → Guía Pedagógica
        </nav>
        <h1>El Problema de los Tres Cuerpos</h1>
        <p class="intro">
            Tres masas bajo atracción gravitacional mutua. Un problema tan simple de enunciar
            como imposible de resolver en general. El nacimiento de la teoría del caos comenzó
            aquí, con Henri Poincaré enfrentándose a lo imprevisible.
        </p>
    </header>

    <main>
        <section class="observation-box">
            <h3>¿Qué Observarás?</h3>
            <ul>
                <li>Tres cuerpos (<span style="color: #ef4444;">rojo</span>, <span style="color: #22c55e;">verde</span>, <span style="color: #3b82f6;">azul</span>) orbitando bajo gravedad mutua</li>
                <li>Estelas que muestran las trayectorias recorridas</li>
                <li>La energía total (cinética + potencial) se conserva</li>
                <li>Órbitas periódicas especiales que se repiten exactamente</li>
                <li>Comportamiento caótico en configuraciones aleatorias</li>
            </ul>
        </section>

        <h2>El Problema Matemático</h2>

        <p>
            Dados tres cuerpos con masas m₁, m₂, m₃ y posiciones r₁, r₂, r₃, la ley de
            gravitación de Newton dicta:
        </p>

        <div class="equation-box">
            <div class="equation">mᵢ r̈ᵢ = Σⱼ≠ᵢ G mᵢ mⱼ (rⱼ - rᵢ) / |rⱼ - rᵢ|³</div>
            <div class="equation-label">Ecuación de movimiento para el cuerpo i bajo gravedad newtoniana</div>
        </div>

        <p>
            Esto genera un sistema de ecuaciones diferenciales ordinarias de segundo orden.
            Para dos cuerpos, Kepler y Newton encontraron soluciones analíticas: elipses,
            parábolas e hipérbolas. Para tres cuerpos, <em>no existe solución general</em>.
        </p>

        <div class="concept-grid">
            <div class="concept-card">
                <h4>2 Cuerpos</h4>
                <p>Completamente soluble. Las órbitas son cónicas (elipse, parábola, hipérbola).</p>
            </div>
            <div class="concept-card">
                <h4>3 Cuerpos</h4>
                <p>No integrable. Comportamiento caótico genérico. Solo soluciones especiales conocidas.</p>
            </div>
            <div class="concept-card">
                <h4>N Cuerpos</h4>
                <p>Aún más complejo. Base de la dinámica de cúmulos estelares y galaxias.</p>
            </div>
            <div class="concept-card">
                <h4>Caos</h4>
                <p>Pequeños cambios en condiciones iniciales → trayectorias radicalmente diferentes.</p>
            </div>
        </div>

        <h2>Leyes de Conservación</h2>

        <div class="conservation-box">
            <h4>¿Qué Se Conserva?</h4>
            <div class="conservation-list">
                <div class="conservation-item">
                    <strong>Energía Total</strong><br>
                    E = K + U = constante
                </div>
                <div class="conservation-item">
                    <strong>Momento Lineal</strong><br>
                    P = Σ mᵢvᵢ = constante
                </div>
                <div class="conservation-item">
                    <strong>Momento Angular</strong><br>
                    L = Σ mᵢ(rᵢ × vᵢ) = constante
                </div>
                <div class="conservation-item">
                    <strong>Centro de Masa</strong><br>
                    Se mueve en línea recta (o está fijo)
                </div>
            </div>
        </div>

        <p>
            Estas 10 integrales de movimiento (1 energía + 3 momento lineal + 3 momento angular
            + 3 centro de masa) no son suficientes para resolver un sistema de 18 ecuaciones
            (3 cuerpos × 3 dimensiones × 2 para posición y velocidad). Para integrabilidad
            se necesitarían 17 integrales independientes.
        </p>

        <h2>Órbitas Periódicas Famosas</h2>

        <div class="orbit-grid">
            <div class="orbit-card">
                <div class="body-colors">
                    <div class="body-dot" style="background: #ef4444;"></div>
                    <div class="body-dot" style="background: #22c55e;"></div>
                    <div class="body-dot" style="background: #3b82f6;"></div>
                </div>
                <h5>Figura 8</h5>
                <p>Los tres cuerpos siguen la misma trayectoria en forma de 8</p>
            </div>
            <div class="orbit-card">
                <div class="body-colors">
                    <div class="body-dot" style="background: #ef4444;"></div>
                    <div class="body-dot" style="background: #22c55e;"></div>
                    <div class="body-dot" style="background: #3b82f6;"></div>
                </div>
                <h5>Lagrange</h5>
                <p>Triángulo equilátero que rota manteniendo su forma</p>
            </div>
            <div class="orbit-card">
                <div class="body-colors">
                    <div class="body-dot" style="background: #ef4444;"></div>
                    <div class="body-dot" style="background: #22c55e;"></div>
                    <div class="body-dot" style="background: #3b82f6;"></div>
                </div>
                <h5>Euler</h5>
                <p>Tres cuerpos en línea que rotan manteniendo posiciones relativas</p>
            </div>
            <div class="orbit-card">
                <div class="body-colors">
                    <div class="body-dot" style="background: #ef4444;"></div>
                    <div class="body-dot" style="background: #22c55e;"></div>
                    <div class="body-dot" style="background: #3b82f6;"></div>
                </div>
                <h5>Mariposa</h5>
                <p>Familia de órbitas con simetría de reflexión</p>
            </div>
        </div>

        <div class="key-concept">
            <strong>La Figura 8:</strong> Descubierta en 1993 por Cristopher Moore (numéricamente)
            y demostrada rigurosamente en 2000 por Chenciner y Montgomery. Los tres cuerpos
            de igual masa siguen <em>la misma trayectoria</em> en forma de 8, espaciados en
            fase por 2π/3. Es estable bajo pequeñas perturbaciones y uno de los hallazgos
            más sorprendentes de la mecánica celeste moderna.
        </div>

        <h2>Experimentos Guiados</h2>

        <div class="experiment-section">
            <h3>Experimento 1: La Elegancia de la Figura 8</h3>
            <ol>
                <li>Selecciona el preset "Figura 8 (Chenciner-Montgomery)"</li>
                <li>Observa cómo los tres cuerpos siguen la misma curva</li>
                <li>Activa "Seguir centro de masa" para ver mejor la simetría</li>
                <li>El centro de masa permanece inmóvil en el origen</li>
                <li>Monitorea la energía: ¿se conserva exactamente?</li>
            </ol>
            <p>
                <strong>Nota:</strong> La conservación de energía depende de la precisión
                numérica. La simulación usa integración RK4, que es buena pero no perfecta.
            </p>
        </div>

        <div class="experiment-section">
            <h3>Experimento 2: Triángulo de Lagrange</h3>
            <ol>
                <li>Selecciona "Triángulo de Lagrange"</li>
                <li>Observa que los tres cuerpos mantienen un triángulo equilátero</li>
                <li>El triángulo rota como un cuerpo rígido</li>
                <li>Esta es una solución exacta para masas iguales o desiguales</li>
            </ol>
            <p>
                <strong>Aplicación real:</strong> Los asteroides Troyanos de Júpiter orbitan
                en los puntos de Lagrange L₄ y L₅, formando triángulos equiláteros con
                Júpiter y el Sol.
            </p>
        </div>

        <div class="experiment-section">
            <h3>Experimento 3: Caos en Acción</h3>
            <ol>
                <li>Selecciona "Aleatorio" y observa el comportamiento</li>
                <li>Reinicia varias veces para ver diferentes evoluciones</li>
                <li>Observa cómo frecuentemente un cuerpo es "expulsado"</li>
                <li>Compara con las órbitas periódicas ordenadas</li>
            </ol>
            <p>
                <strong>Insight:</strong> El comportamiento genérico es caótico. Las órbitas
                periódicas son excepcionales, "islas de orden en un mar de caos".
            </p>
        </div>

        <div class="experiment-section">
            <h3>Experimento 4: Sensibilidad a Condiciones Iniciales</h3>
            <ol>
                <li>Selecciona "Figura 8" y deja correr por ~100 unidades de tiempo</li>
                <li>Reinicia y observa: ¿la órbita es idéntica?</li>
                <li>Los pequeños errores numéricos eventualmente divergen</li>
                <li>Este es el "efecto mariposa" en acción</li>
            </ol>
            <p>
                <strong>Reflexión:</strong> Incluso con órbitas periódicas teóricamente
                estables, los errores de redondeo crecen exponencialmente.
            </p>
        </div>

        <h2>Contexto Histórico</h2>

        <div class="history-box">
            <h3>De Newton a Poincaré</h3>
            <div class="timeline">
                <div class="timeline-item">
                    <div class="timeline-year">1687</div>
                    <p>
                        <strong>Isaac Newton:</strong> Publica los Principia. Resuelve
                        el problema de dos cuerpos pero reconoce la dificultad de tres.
                    </p>
                </div>
                <div class="timeline-item">
                    <div class="timeline-year">1772</div>
                    <p>
                        <strong>Joseph-Louis Lagrange:</strong> Descubre las soluciones
                        de triángulo equilátero y línea recta.
                    </p>
                </div>
                <div class="timeline-item">
                    <div class="timeline-year">1889</div>
                    <p>
                        <strong>Henri Poincaré:</strong> Gana el premio del Rey Oscar II
                        demostrando que el problema es no integrable. Nace la teoría del caos.
                    </p>
                </div>
                <div class="timeline-item">
                    <div class="timeline-year">1912</div>
                    <p>
                        <strong>Karl Sundman:</strong> Encuentra una solución en forma de
                        serie de potencias, pero converge demasiado lento para ser práctica.
                    </p>
                </div>
                <div class="timeline-item">
                    <div class="timeline-year">2000</div>
                    <p>
                        <strong>Chenciner & Montgomery:</strong> Demuestran rigurosamente
                        la existencia de la órbita en figura 8.
                    </p>
                </div>
                <div class="timeline-item">
                    <div class="timeline-year">2013-Presente</div>
                    <p>
                        <strong>Šuvakov & Dmitrašinović:</strong> Descubren cientos de nuevas
                        familias de órbitas periódicas usando métodos computacionales.
                    </p>
                </div>
            </div>
        </div>

        <h2>¿Por Qué Es Tan Difícil?</h2>

        <p>
            El problema de tres cuerpos no tiene solución analítica general por razones
            profundas relacionadas con la geometría del espacio de fases:
        </p>

        <div class="concept-grid">
            <div class="concept-card">
                <h4>Secciones de Poincaré</h4>
                <p>El espacio de fases tiene regiones caóticas donde las trayectorias son densas.</p>
            </div>
            <div class="concept-card">
                <h4>Teorema KAM</h4>
                <p>Solo algunos toros invariantes sobreviven perturbaciones, no todos.</p>
            </div>
            <div class="concept-card">
                <h4>Exponentes de Lyapunov</h4>
                <p>Positivos para la mayoría de condiciones iniciales → caos.</p>
            </div>
            <div class="concept-card">
                <h4>Singularidades</h4>
                <p>Cuando dos cuerpos colisionan, las ecuaciones divergen.</p>
            </div>
        </div>

        <h2>Métodos de Integración Numérica</h2>

        <p>
            Sin solución analítica, debemos integrar numéricamente. La simulación usa
            el método de Runge-Kutta de orden 4 (RK4):
        </p>

        <div class="equation-box">
            <div class="equation">y_{n+1} = y_n + (k₁ + 2k₂ + 2k₃ + k₄)/6</div>
            <div class="equation-label">Esquema RK4: combina pendientes en diferentes puntos del intervalo</div>
        </div>

        <p>
            Para simulaciones de larga duración en astrofísica se usan métodos
            <em>simplécticos</em> que preservan exactamente la estructura hamiltoniana,
            evitando la deriva secular de la energía.
        </p>

        <h2>Conexiones Interdisciplinarias</h2>

        <div class="connections-grid">
            <div class="connection-card">
                <h4>Astrofísica</h4>
                <p>
                    Estrellas binarias con un tercer compañero, sistemas planetarios múltiples,
                    dinámica de cúmulos estelares.
                </p>
            </div>
            <div class="connection-card">
                <h4>Misiones Espaciales</h4>
                <p>
                    Trayectorias de sondas usando los puntos de Lagrange (JWST en L₂),
                    asistencia gravitacional.
                </p>
            </div>
            <div class="connection-card">
                <h4>Atractor de Lorenz</h4>
                <p>
                    Otro sistema de 3 ecuaciones (para convección) que exhibe caos similar.
                </p>
            </div>
            <div class="connection-card">
                <h4>Teoría del Caos</h4>
                <p>
                    Poincaré descubrió el caos estudiando este problema. Fundó una rama
                    entera de las matemáticas.
                </p>
            </div>
            <div class="connection-card">
                <h4>Química</h4>
                <p>
                    Reacciones entre tres moléculas. Algunos métodos de mecánica celeste
                    se aplican a colisiones moleculares.
                </p>
            </div>
            <div class="connection-card">
                <h4>Literatura</h4>
                <p>
                    La novela "El problema de los tres cuerpos" de Liu Cixin usa el
                    concepto como metáfora de lo impredecible.
                </p>
            </div>
        </div>

        <h2>El Problema Restringido</h2>

        <p>
            Una simplificación importante: el <em>problema restringido de tres cuerpos</em>.
            Dos masas grandes (primarias) orbitan entre sí, y una masa despreciable (test
            particle) se mueve en su campo gravitacional sin afectarlas.
        </p>

        <div class="key-concept">
            <strong>Los 5 Puntos de Lagrange:</strong> En el problema restringido existen
            5 puntos donde la masa pequeña puede permanecer en equilibrio relativo:
            L₁, L₂, L₃ (inestables, en línea) y L₄, L₅ (estables, formando triángulos).
            El telescopio James Webb opera en L₂ del sistema Sol-Tierra.
        </div>

        <div class="further-reading">
            <h3>Para Explorar Más</h3>
            <ul>
                <li><strong>"Celestial Encounters" (Diacu & Holmes):</strong> Historia del problema</li>
                <li><strong>Catálogo de Šuvakov:</strong> Cientos de órbitas periódicas descubiertas</li>
                <li><strong>Simulaciones N-cuerpos:</strong> Códigos como GADGET para galaxias</li>
                <li><strong>Teorema de Sundman:</strong> La solución en serie que converge... lentamente</li>
                <li><strong>Problema del péndulo doble:</strong> Otro sistema caótico más simple</li>
            </ul>
        </div>

        <div class="key-concept">
            <strong>Reflexión Final:</strong> El problema de tres cuerpos es un recordatorio
            de que la naturaleza puede ser fundamentalmente impredecible, incluso cuando las
            leyes que la gobiernan son perfectamente deterministas. Newton nos dio las ecuaciones
            hace más de 300 años; todavía no podemos resolverlas en general. Esta tensión entre
            determinismo y predictibilidad está en el corazón de la física moderna.
        </div>
    </main>

    <footer>
        <a href="../three-body.html">← Volver a la Simulación</a>
    </footer>
</body>
</html>
