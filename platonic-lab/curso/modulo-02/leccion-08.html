<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lección 8: La Fórmula de Euler | Matemáticas Visuales</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- KaTeX -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {delimiters: [{left: '$$', right: '$$', display: true}, {left: '\\(', right: '\\)', display: false}]});"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .mono { font-family: 'JetBrains Mono', monospace; }
        .glow-text { text-shadow: 0 0 20px rgba(168, 85, 247, 0.5); }
        .progress-bar { background: linear-gradient(90deg, #a855f7, #22d3ee); }
        .katex { color: inherit; font-size: 1.1em; }
    </style>
</head>
<body class="bg-black text-gray-100 min-h-screen">
    <!-- Header -->
    <header class="border-b border-gray-900 bg-black/80 backdrop-blur-sm sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-6 py-4">
            <div class="flex justify-between items-center">
                <div>
                    <nav class="text-xs text-gray-600 mb-1">
                        <a href="../../../../../_portal/index.html" class="hover:text-violet-400 transition">EigenLab</a>
                        <span class="mx-1">/</span>
                        <a href="../../../index.html" class="hover:text-violet-400 transition">Math Visual Lab</a>
                        <span class="mx-1">/</span>
                        <a href="../../index.html" class="hover:text-violet-400 transition">Platonic Lab</a>
                        <span class="mx-1">/</span>
                        <a href="../index.html" class="hover:text-violet-400 transition">Curso</a>
                        <span class="mx-1">/</span>
                        <span class="text-gray-500">Módulo 02</span>
                    </nav>
                    <h1 class="text-lg font-light">
                        <span class="text-violet-400 font-medium glow-text">Lección 8</span> — La Fórmula de Euler
                    </h1>
                </div>
                <nav class="flex gap-2 text-sm">
                    <a href="./leccion-07.html" class="px-3 py-2 rounded-lg hover:bg-gray-900 text-gray-400 transition">← Anterior</a>
                    <a href="./leccion-09.html" class="px-3 py-2 rounded-lg bg-violet-500/10 text-violet-400 hover:bg-violet-500/20 transition">Siguiente →</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Layout -->
    <div class="max-w-6xl mx-auto px-6 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <!-- Sidebar -->
            <aside class="lg:col-span-1">
                <div class="bg-gray-950 border border-gray-900 rounded-2xl p-6 sticky top-24">
                    <h3 class="text-lg font-semibold mb-4 text-cyan-400">Módulo 02</h3>
                    <p class="text-sm text-gray-500 mb-4">La Fórmula de Euler</p>

                    <div class="mb-6">
                        <div class="flex justify-between text-xs text-gray-400 mb-2">
                            <span>Progreso</span>
                            <span>2/6</span>
                        </div>
                        <div class="w-full bg-gray-800 rounded-full h-2">
                            <div class="progress-bar h-2 rounded-full" style="width: 33.3%"></div>
                        </div>
                    </div>

                    <nav class="space-y-2">
                        <a href="./leccion-07.html" class="block px-3 py-2 rounded-lg hover:bg-gray-900 text-gray-400 text-sm transition">7. Vértices, Aristas y Caras</a>
                        <a href="./leccion-08.html" class="block px-3 py-2 rounded-lg bg-violet-500/10 text-violet-400 text-sm">8. La Fórmula de Euler</a>
                        <a href="./leccion-09.html" class="block px-3 py-2 rounded-lg hover:bg-gray-900 text-gray-400 text-sm transition">9. Demostración Visual</a>
                        <a href="./leccion-10.html" class="block px-3 py-2 rounded-lg hover:bg-gray-900 text-gray-400 text-sm transition">10. Verificación en 5 Sólidos</a>
                        <a href="./leccion-11.html" class="block px-3 py-2 rounded-lg hover:bg-gray-900 text-gray-400 text-sm transition">11. ¿Por qué Solo 5?</a>
                        <a href="./leccion-12.html" class="block px-3 py-2 rounded-lg hover:bg-gray-900 text-gray-400 text-sm transition">12. Topología y la Esfera</a>
                    </nav>
                </div>
            </aside>

            <!-- Content -->
            <main class="lg:col-span-3">
                <article class="bg-gray-950 border border-gray-900 rounded-2xl p-8">
                    <!-- Header -->
                    <div class="mb-8">
                        <div class="flex items-center justify-between mb-4">
                            <span class="text-cyan-400 text-sm font-medium">Lección 8</span>
                            <span class="text-gray-400 text-sm">~25 min</span>
                        </div>
                        <h1 class="text-3xl font-bold mb-4 text-violet-400 glow-text">La Fórmula de Euler</h1>
                        <p class="text-gray-400 text-lg">Una ecuación que conecta la combinatoria de un poliedro con la topología de la esfera.</p>
                    </div>

                    <!-- Content -->
                    <div class="prose prose-invert max-w-none">

                        <!-- 1. El Descubrimiento -->
                        <h2 class="text-2xl font-semibold text-violet-400 mb-4">El Descubrimiento</h2>
                        <p class="text-gray-300 mb-4">
                            El 14 de noviembre de 1750, Leonhard Euler escribió una carta a Christian Goldbach en la que anunciaba un descubrimiento notable: <em>"En todo cuerpo sólido, la suma del número de caras y el número de vértices excede al número de aristas en 2."</em>
                        </p>
                        <p class="text-gray-300 mb-4">
                            Euler no dio una demostración. La publicó ocho años después, en 1758, con un intento de prueba que resultó incompleto. La primera demostración rigurosa fue obra de Legendre en 1794, usando geometría esférica.
                        </p>
                        <p class="text-gray-300 mb-6">
                            Pero hay un giro histórico: alrededor de 1630, René Descartes había descubierto un resultado equivalente — que el defecto angular total de todo poliedro convexo es \(720°\) (como vimos en la Lección 4). Su manuscrito se perdió y no fue redescubierto hasta 1860. La relación entre ambos resultados es profunda: como mostraremos, el defecto angular \(\sum \delta_v = 4\pi\) es algebraicamente equivalente a \(V - E + F = 2\).
                        </p>

                        <!-- 2. La Fórmula -->
                        <h2 class="text-2xl font-semibold text-violet-400 mb-4">La Fórmula</h2>
                        <div class="bg-violet-500/5 border border-violet-500/20 rounded-2xl p-8 mb-6 text-center">
                            <p class="text-sm text-gray-500 uppercase tracking-wider mb-3">Fórmula de Euler (1750)</p>
                            <div class="text-3xl text-violet-300 mono mb-3">$$V - E + F = 2$$</div>
                            <p class="text-sm text-gray-500">Para todo poliedro convexo — y más generalmente, para toda subdivisión de la esfera</p>
                        </div>
                        <p class="text-gray-300 mb-4">
                            La cantidad \(\chi = V - E + F\) se llama <strong class="text-cyan-400">característica de Euler</strong>. Para cualquier poliedro convexo vale \(\chi = 2\), independientemente de cuántas caras tenga, de qué forma sean, o de cómo esté deformado.
                        </p>
                        <p class="text-gray-300 mb-6">
                            En la Lección 7 verificamos que los sólidos platónicos, los prismas y las pirámides satisfacen esta relación. Pero la fórmula de Euler no es solo una observación empírica: es un <strong class="text-cyan-400">teorema</strong> con una demostración rigurosa (que daremos en la Lección 9). Y como toda buena herramienta matemática, su poder radica en cómo se aplica.
                        </p>

                        <!-- 3. La Fórmula como Herramienta -->
                        <h2 class="text-2xl font-semibold text-violet-400 mb-4">La Fórmula como Detective</h2>
                        <p class="text-gray-300 mb-6">
                            La fórmula de Euler, combinada con el principio del doble conteo (Lección 7), permite identificar un poliedro a partir de información parcial. Veamos tres ejemplos.
                        </p>

                        <div class="bg-violet-500/10 border border-violet-500/30 rounded-lg p-6 mb-6">
                            <h4 class="font-semibold text-violet-400 mb-3">Ejemplo 1: Todas las caras triangulares, \(V = 6\)</h4>
                            <div class="space-y-2 text-gray-300">
                                <p>Si todas las caras son triángulos, el doble conteo da \(3F = 2E\), es decir, \(F = \tfrac{2E}{3}\).</p>
                                <p>Sustituyendo en Euler:</p>
                                <p class="ml-4">\(6 - E + \tfrac{2E}{3} = 2\)</p>
                                <p class="ml-4">\(6 - \tfrac{E}{3} = 2\)</p>
                                <p class="ml-4">\(E = 12, \quad F = 8\)</p>
                                <p class="text-cyan-400 mt-2">Es el <strong>octaedro</strong> \(\{3, 4\}\).</p>
                            </div>
                        </div>

                        <div class="bg-violet-500/10 border border-violet-500/30 rounded-lg p-6 mb-6">
                            <h4 class="font-semibold text-violet-400 mb-3">Ejemplo 2: 12 caras pentagonales</h4>
                            <div class="space-y-2 text-gray-300">
                                <p>Cada cara tiene 5 lados, \(F = 12\). Doble conteo: \(5 \times 12 = 2E\), así que \(E = 30\).</p>
                                <p>Euler: \(V - 30 + 12 = 2 \implies V = 20\).</p>
                                <p class="text-cyan-400 mt-2">Es el <strong>dodecaedro</strong> \(\{5, 3\}\).</p>
                            </div>
                        </div>

                        <div class="bg-violet-500/10 border border-violet-500/30 rounded-lg p-6 mb-6">
                            <h4 class="font-semibold text-violet-400 mb-3">Ejemplo 3: \(V = 12\), cada vértice tiene grado 5</h4>
                            <div class="space-y-2 text-gray-300">
                                <p>Doble conteo desde los vértices: \(5 \times 12 = 2E\), así que \(E = 30\).</p>
                                <p>Euler: \(12 - 30 + F = 2 \implies F = 20\).</p>
                                <p>Verificación: \(3F = 3 \times 20 = 60 = 2E\), así que las 20 caras son triángulos.</p>
                                <p class="text-cyan-400 mt-2">Es el <strong>icosaedro</strong> \(\{3, 5\}\).</p>
                            </div>
                        </div>

                        <p class="text-gray-300 mb-6">
                            En cada caso, la fórmula de Euler reduce los grados de libertad: de los tres valores \(V\), \(E\), \(F\), solo dos son independientes. El tercero está determinado por \(V - E + F = 2\).
                        </p>

                        <!-- 4. Grafos Planos -->
                        <h2 class="text-2xl font-semibold text-violet-400 mb-4">Grafos Planos y la Fórmula</h2>
                        <p class="text-gray-300 mb-4">
                            La fórmula de Euler no se limita a poliedros. Se aplica a cualquier <strong class="text-cyan-400">grafo plano conexo</strong>: un grafo que puede dibujarse en el plano sin que se crucen sus aristas. Las regiones delimitadas por las aristas (incluida la región exterior infinita) son las "caras" del grafo.
                        </p>
                        <div class="bg-gray-900/50 rounded-lg p-6 mb-6 border-l-4 border-violet-400">
                            <p class="text-xl text-center text-gray-200 mb-2">
                                <strong>Fórmula de Euler para grafos planos conexos:</strong>
                            </p>
                            <p class="text-xl text-center text-gray-200">
                                $$V - E + F = 2$$
                            </p>
                            <p class="text-sm text-gray-500 text-center mt-2">donde \(F\) incluye la cara exterior</p>
                        </div>

                        <h3 class="text-xl font-semibold text-cyan-400 mb-3">Consecuencia: la cota \(E \leq 3V - 6\)</h3>
                        <p class="text-gray-300 mb-4">
                            En un grafo plano simple (sin bucles ni aristas múltiples), cada cara está delimitada por al menos 3 aristas. Como cada arista pertenece a exactamente 2 caras:
                        </p>
                        <div class="bg-gray-900/50 rounded-lg p-4 mb-4 border-l-4 border-violet-400">
                            <div class="text-gray-200 space-y-1">
                                <p>\(2E = \sum_{\text{caras}} (\text{aristas de la cara}) \geq 3F\)</p>
                                <p>\(\implies F \leq \tfrac{2E}{3}\)</p>
                            </div>
                        </div>
                        <p class="text-gray-300 mb-4">
                            Combinando con Euler (\(F = 2 - V + E\)):
                        </p>
                        <div class="bg-gray-900/50 rounded-lg p-4 mb-6 border-l-4 border-violet-400">
                            <div class="text-gray-200 space-y-1">
                                <p>\(2 - V + E \leq \tfrac{2E}{3}\)</p>
                                <p>\(6 - 3V + 3E \leq 2E\)</p>
                                <p class="text-violet-400 font-medium">\(E \leq 3V - 6\)</p>
                            </div>
                        </div>

                        <h3 class="text-xl font-semibold text-cyan-400 mb-3">Aplicación: \(K_5\) no es plano</h3>
                        <p class="text-gray-300 mb-4">
                            El <strong>grafo completo</strong> \(K_5\) tiene 5 vértices, todos conectados entre sí: \(E = \frac{5 \times 4}{2} = 10\).
                        </p>

                        <!-- K₅ SVG diagram -->
                        <div class="flex justify-center my-6">
                            <svg viewBox="0 0 200 200" width="160" height="160">
                                <line x1="100" y1="22" x2="176" y2="77" stroke="#a78bfa" stroke-width="1.5" opacity="0.4"/>
                                <line x1="100" y1="22" x2="147" y2="165" stroke="#a78bfa" stroke-width="1.5" opacity="0.4"/>
                                <line x1="100" y1="22" x2="53" y2="165" stroke="#a78bfa" stroke-width="1.5" opacity="0.4"/>
                                <line x1="100" y1="22" x2="24" y2="77" stroke="#a78bfa" stroke-width="1.5" opacity="0.4"/>
                                <line x1="176" y1="77" x2="147" y2="165" stroke="#a78bfa" stroke-width="1.5" opacity="0.4"/>
                                <line x1="176" y1="77" x2="53" y2="165" stroke="#a78bfa" stroke-width="1.5" opacity="0.4"/>
                                <line x1="176" y1="77" x2="24" y2="77" stroke="#a78bfa" stroke-width="1.5" opacity="0.4"/>
                                <line x1="147" y1="165" x2="53" y2="165" stroke="#a78bfa" stroke-width="1.5" opacity="0.4"/>
                                <line x1="147" y1="165" x2="24" y2="77" stroke="#a78bfa" stroke-width="1.5" opacity="0.4"/>
                                <line x1="53" y1="165" x2="24" y2="77" stroke="#a78bfa" stroke-width="1.5" opacity="0.4"/>
                                <circle cx="100" cy="22" r="6" fill="#22d3ee"/>
                                <circle cx="176" cy="77" r="6" fill="#22d3ee"/>
                                <circle cx="147" cy="165" r="6" fill="#22d3ee"/>
                                <circle cx="53" cy="165" r="6" fill="#22d3ee"/>
                                <circle cx="24" cy="77" r="6" fill="#22d3ee"/>
                                <text x="100" y="12" text-anchor="middle" fill="#9ca3af" font-size="11" font-family="Inter">K₅</text>
                            </svg>
                        </div>

                        <p class="text-gray-300 mb-4">
                            Si \(K_5\) fuera plano, tendría que cumplir \(E \leq 3V - 6\):
                        </p>
                        <div class="bg-violet-500/10 border border-violet-500/30 rounded-lg p-6 mb-6">
                            <div class="space-y-2 text-gray-300">
                                <p>\(3V - 6 = 3(5) - 6 = 9\)</p>
                                <p>Pero \(E = 10 > 9\). <strong class="text-cyan-400">Contradicción.</strong></p>
                                <p class="text-violet-400 mt-2">Por lo tanto, \(K_5\) no se puede dibujar en el plano sin cruces de aristas.</p>
                            </div>
                        </div>

                        <p class="text-gray-300 mb-6">
                            Esta es una de las aplicaciones más elegantes de la fórmula de Euler: una ecuación sobre poliedros convexos resulta ser la herramienta clave para demostrar que ciertos grafos no son planos.
                        </p>

                        <!-- 5. χ como Invariante -->
                        <h2 class="text-2xl font-semibold text-violet-400 mb-4">El Invariante Topológico \(\chi\)</h2>
                        <p class="text-gray-300 mb-4">
                            La cantidad \(\chi = V - E + F = 2\) no es un accidente numérico. Es una propiedad de la <strong class="text-cyan-400">esfera</strong> como superficie topológica. Todo poliedro convexo es topológicamente equivalente a una esfera (puedes "inflarlo" continuamente hasta redondearla), y por eso todos comparten la misma \(\chi\).
                        </p>
                        <p class="text-gray-300 mb-4">
                            Pero no todas las superficies tienen \(\chi = 2\). Un <strong>toro</strong> (forma de rosquilla) tiene \(\chi = 0\): si subdivides un toro en caras, aristas y vértices, obtendrás \(V - E + F = 0\). En general, una superficie de <strong>género</strong> \(g\) (con \(g\) "agujeros") tiene:
                        </p>
                        <div class="bg-gray-900/50 rounded-lg p-6 mb-6 border-l-4 border-cyan-400">
                            <p class="text-xl text-center text-gray-200">
                                $$\chi = 2 - 2g$$
                            </p>
                            <p class="text-sm text-gray-500 text-center mt-2">Esfera: \(g=0 \implies \chi=2\). Toro: \(g=1 \implies \chi=0\). Doble toro: \(g=2 \implies \chi=-2\).</p>
                        </div>
                        <p class="text-gray-300 mb-6">
                            Así, \(\chi\) es un <strong class="text-cyan-400">invariante topológico</strong>: clasifica superficies por su forma global, ignorando detalles geométricos como tamaño o curvatura. Desarrollaremos esta conexión en la Lección 12.
                        </p>

                        <!-- 6. Equivalencia con Descartes -->
                        <h2 class="text-2xl font-semibold text-violet-400 mb-4">Conexión con el Defecto Angular</h2>
                        <p class="text-gray-300 mb-4">
                            En la Lección 4 vimos que el defecto angular total de un poliedro convexo es \(\sum \delta_v = 720° = 4\pi\). Demostremos que esto es equivalente a la fórmula de Euler.
                        </p>
                        <div class="bg-gray-900/50 rounded-lg p-6 mb-6 border-l-4 border-violet-400">
                            <div class="text-gray-200 space-y-2">
                                <p>\(\displaystyle\sum_{v} \delta_v = \sum_{v} \left(2\pi - \sum_{\text{caras en } v} \alpha\right) = 2\pi V - \sum_{\text{todos los ángulos}} \alpha\)</p>
                                <p class="text-sm text-gray-400 mt-2">La suma total de ángulos interiores de todas las caras: cada cara de \(p_i\) lados contribuye \((p_i - 2)\pi\), así que:</p>
                                <p>\(\displaystyle\sum \alpha = \sum_{i=1}^{F} (p_i - 2)\pi = \pi\left(\sum p_i - 2F\right) = \pi(2E - 2F)\)</p>
                                <p class="text-sm text-gray-400 mt-1">(usando \(\sum p_i = 2E\) del doble conteo, Lección 7)</p>
                                <p>Sustituyendo:</p>
                                <p>\(\displaystyle\sum \delta_v = 2\pi V - \pi(2E - 2F) = 2\pi(V - E + F)\)</p>
                                <p class="text-violet-400 font-medium mt-2">\(\displaystyle\sum \delta_v = 2\pi \cdot \chi = 4\pi \iff \chi = 2\)</p>
                            </div>
                        </div>
                        <p class="text-gray-300 mb-6">
                            El teorema de Descartes y la fórmula de Euler son dos formas de expresar la misma verdad: la <strong class="text-cyan-400">curvatura total</strong> de una superficie cerrada es un invariante topológico. Esta idea culmina en el teorema de Gauss-Bonnet, uno de los resultados centrales de la geometría diferencial.
                        </p>

                        <!-- 7. Ejercicios -->
                        <h2 class="text-2xl font-semibold text-violet-400 mb-4">Ejercicios</h2>
                        <div class="bg-violet-500/10 border border-violet-500/30 rounded-lg p-6 mb-6">
                            <ol class="list-decimal list-inside space-y-4 text-gray-300">
                                <li>Un poliedro tiene 20 caras triangulares. Usa el doble conteo y la fórmula de Euler para encontrar \(E\) y \(V\).</li>
                                <li>Un poliedro tiene 8 caras triangulares y 6 caras cuadradas (cuboctaedro). Calcula \(E\) y \(V\).
                                    <span class="text-gray-500 text-sm block ml-6 mt-1">(Pista: \(\sum \text{lados} = 8 \times 3 + 6 \times 4\).)</span>
                                </li>
                                <li>Demuestra que en un grafo plano simple conexo donde ninguna cara es un triángulo (todas tienen \(\geq 4\) aristas), se cumple \(E \leq 2V - 4\).</li>
                                <li>El grafo bipartito completo \(K_{3,3}\) tiene 6 vértices y 9 aristas. Usando el resultado del ejercicio anterior (es bipartito, así que no tiene triángulos), demuestra que no es plano.</li>
                                <li>Verifica la equivalencia Descartes-Euler para el cubo: calcula \(\sum \delta_v\) directamente (cada vértice tiene 3 cuadrados, ángulo \(90°\)) y comprueba que da \(4\pi = 720°\).</li>
                            </ol>
                        </div>
                    </div>

                    <!-- LAB Section -->
                    <div class="mt-10">
                        <h2 class="text-2xl font-bold text-cyan-400 mb-4">LAB: La Fórmula en Acción</h2>
                        <p class="text-gray-400 mb-4">Arrastra para rotar. Comprueba \(V - E + F = 2\) para poliedros regulares e irregulares.</p>

                        <div class="relative rounded-xl border border-gray-800 overflow-hidden" style="background:#030712;">
                            <canvas id="mini-lab" style="width:100%; height:420px; display:block; cursor:grab;"></canvas>
                            <div class="absolute top-4 left-4 text-left mono">
                                <div class="text-base font-medium text-gray-300 mb-1" id="solid-name">Tetraedro</div>
                            </div>
                            <div class="absolute bottom-4 left-0 right-0 text-center mono" id="euler-eq"></div>
                        </div>

                        <div class="mt-3">
                            <div class="text-xs text-gray-600 mb-1.5">Regulares</div>
                            <div class="flex flex-wrap gap-2 mb-2">
                                <button data-solid="0" class="solid-btn px-4 py-2 rounded-lg text-sm transition border">Tetraedro</button>
                                <button data-solid="1" class="solid-btn px-4 py-2 rounded-lg text-sm transition border">Cubo</button>
                                <button data-solid="2" class="solid-btn px-4 py-2 rounded-lg text-sm transition border">Octaedro</button>
                                <button data-solid="3" class="solid-btn px-4 py-2 rounded-lg text-sm transition border">Dodecaedro</button>
                                <button data-solid="4" class="solid-btn px-4 py-2 rounded-lg text-sm transition border">Icosaedro</button>
                            </div>
                            <div class="text-xs text-gray-600 mb-1.5">Prismas</div>
                            <div class="flex flex-wrap gap-2">
                                <button data-solid="5" class="solid-btn px-4 py-2 rounded-lg text-sm transition border">Prisma pentagonal</button>
                                <button data-solid="6" class="solid-btn px-4 py-2 rounded-lg text-sm transition border">Prisma hexagonal</button>
                            </div>
                        </div>
                    </div>

                    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
                    <script>
                    (function(){
                        var canvas = document.getElementById('mini-lab');
                        var renderer = new THREE.WebGLRenderer({canvas:canvas, antialias:true});
                        renderer.setPixelRatio(Math.min(window.devicePixelRatio,2));
                        renderer.setClearColor(0x030712);

                        var scene = new THREE.Scene();
                        var camera = new THREE.PerspectiveCamera(35,2,0.1,100);
                        camera.position.z = 5.2;

                        function makePrism(n, r, h){
                            var g=new THREE.BufferGeometry();
                            var v=[];
                            for(var k=0;k<n;k++){
                                var a=2*Math.PI*k/n - Math.PI/2;
                                v.push(r*Math.cos(a), h, r*Math.sin(a));
                            }
                            for(var k=0;k<n;k++){
                                var a=2*Math.PI*k/n - Math.PI/2;
                                v.push(r*Math.cos(a), -h, r*Math.sin(a));
                            }
                            g.setAttribute('position', new THREE.BufferAttribute(new Float32Array(v),3));
                            var idx=[];
                            // Top face (fan)
                            for(var k=1;k<n-1;k++) idx.push(0,k,k+1);
                            // Bottom face (reversed fan)
                            for(var k=1;k<n-1;k++) idx.push(n, n+k+1, n+k);
                            // Side quads
                            for(var k=0;k<n;k++){
                                var a=k, b=(k+1)%n, c=(k+1)%n+n, d=k+n;
                                idx.push(a,b,c, a,c,d);
                            }
                            g.setIndex(idx);
                            g.computeVertexNormals();
                            return g;
                        }

                        var solids = [
                            {name:'Tetraedro', V:4, E:6, F:4,
                             geo:new THREE.TetrahedronGeometry(1.3)},
                            {name:'Cubo', V:8, E:12, F:6,
                             geo:new THREE.BoxGeometry(1.7,1.7,1.7)},
                            {name:'Octaedro', V:6, E:12, F:8,
                             geo:new THREE.OctahedronGeometry(1.4)},
                            {name:'Dodecaedro', V:20, E:30, F:12,
                             geo:new THREE.DodecahedronGeometry(1.3)},
                            {name:'Icosaedro', V:12, E:30, F:20,
                             geo:new THREE.IcosahedronGeometry(1.3)},
                            {name:'Prisma pentagonal', V:10, E:15, F:7,
                             geo:makePrism(5, 1.0, 0.9)},
                            {name:'Prisma hexagonal', V:12, E:18, F:8,
                             geo:makePrism(6, 0.9, 0.85)}
                        ];

                        var group, rotX=0.4, rotY=0.6, dragging=false, px,py, autoRot=true, autoTimer;

                        function show(i){
                            if(group) scene.remove(group);
                            group = new THREE.Group();
                            var s=solids[i];

                            group.add(new THREE.Mesh(s.geo, new THREE.MeshBasicMaterial({
                                color:0xa78bfa, transparent:true, opacity:0.06, side:THREE.DoubleSide
                            })));
                            group.add(new THREE.LineSegments(
                                new THREE.EdgesGeometry(s.geo),
                                new THREE.LineBasicMaterial({color:0xa78bfa, transparent:true, opacity:0.7})
                            ));

                            var pos=s.geo.getAttribute('position'),seen={},uv=[];
                            for(var j=0;j<pos.count;j++){
                                var k=pos.getX(j).toFixed(3)+','+pos.getY(j).toFixed(3)+','+pos.getZ(j).toFixed(3);
                                if(!seen[k]){seen[k]=1;uv.push(pos.getX(j),pos.getY(j),pos.getZ(j));}
                            }
                            var pg=new THREE.BufferGeometry();
                            pg.setAttribute('position',new THREE.Float32BufferAttribute(uv,3));
                            group.add(new THREE.Points(pg,new THREE.PointsMaterial({color:0x22d3ee,size:5,sizeAttenuation:false})));

                            scene.add(group);

                            // Update UI
                            document.getElementById('solid-name').textContent=s.name;
                            var eq='<span style="color:#9ca3af">V \u2212 E + F = </span>';
                            eq+='<span style="color:#a78bfa">'+s.V+'</span>';
                            eq+=' <span style="color:#9ca3af">\u2212</span> ';
                            eq+='<span style="color:#a78bfa">'+s.E+'</span>';
                            eq+=' <span style="color:#9ca3af">+</span> ';
                            eq+='<span style="color:#a78bfa">'+s.F+'</span>';
                            eq+=' <span style="color:#9ca3af">=</span> ';
                            eq+='<span style="color:#22d3ee;font-weight:600;font-size:1.1em">2</span>';
                            document.getElementById('euler-eq').innerHTML=eq;

                            var btns=document.querySelectorAll('.solid-btn');
                            for(var b=0;b<btns.length;b++){
                                if(b===i){
                                    btns[b].style.background='rgba(167,139,250,0.15)';
                                    btns[b].style.borderColor='#a78bfa';
                                    btns[b].style.color='#a78bfa';
                                } else {
                                    btns[b].style.background='#111827';
                                    btns[b].style.borderColor='#1f2937';
                                    btns[b].style.color='#9ca3af';
                                }
                            }
                        }

                        canvas.addEventListener('pointerdown',function(e){
                            dragging=true;px=e.clientX;py=e.clientY;autoRot=false;
                            clearTimeout(autoTimer);canvas.style.cursor='grabbing';
                        });
                        window.addEventListener('pointerup',function(){
                            dragging=false;canvas.style.cursor='grab';
                            autoTimer=setTimeout(function(){autoRot=true;},3000);
                        });
                        window.addEventListener('pointermove',function(e){
                            if(!dragging)return;
                            rotY+=(e.clientX-px)*0.008;rotX+=(e.clientY-py)*0.008;
                            px=e.clientX;py=e.clientY;
                        });

                        function resize(){
                            var w=canvas.clientWidth,h=canvas.clientHeight;
                            renderer.setSize(w,h,false);
                            camera.aspect=w/h;camera.updateProjectionMatrix();
                        }
                        window.addEventListener('resize',resize);
                        resize();

                        var btns=document.querySelectorAll('.solid-btn');
                        for(var b=0;b<btns.length;b++){
                            btns[b].addEventListener('click',function(){show(+this.dataset.solid);});
                        }

                        show(0);
                        (function loop(){
                            requestAnimationFrame(loop);
                            if(autoRot) rotY+=0.004;
                            if(group) group.rotation.set(rotX,rotY,0);
                            renderer.render(scene,camera);
                        })();
                    })();
                    </script>

                    <!-- Navigation -->
                    <div class="mt-12 pt-8 border-t border-gray-800 flex justify-between items-center">
                        <a href="./leccion-07.html" class="px-6 py-3 bg-gray-900 hover:bg-gray-800 text-gray-400 rounded-lg font-semibold transition">
                            ← Vértices, Aristas y Caras
                        </a>
                        <a href="./leccion-09.html" class="px-6 py-3 bg-violet-500/10 text-violet-400 hover:bg-violet-500/20 rounded-lg font-semibold transition">
                            Siguiente: Demostración Visual →
                        </a>
                    </div>
                </article>
            </main>
        </div>
    </div>

    <!-- Footer -->
    <footer class="border-t border-gray-900 py-6 mt-12">
        <div class="max-w-6xl mx-auto px-6 text-center">
            <nav class="text-xs text-gray-600 mb-2">
                <a href="../../../../../_portal/index.html" class="hover:text-violet-400 transition">EigenLab</a>
                <span class="mx-1">/</span>
                <a href="../../../index.html" class="hover:text-violet-400 transition">Math Visual Lab</a>
                <span class="mx-1">/</span>
                <a href="../../index.html" class="hover:text-violet-400 transition">Platonic Lab</a>
                <span class="mx-1">/</span>
                <a href="../index.html" class="hover:text-violet-400 transition">Curso</a>
                <span class="mx-1">/</span>
                <span class="text-gray-500">Módulo 02</span>
            </nav>
            <p class="text-gray-700 text-sm mono">Módulo 02 · La Fórmula de Euler</p>
        </div>
    </footer>
</body>
</html>
