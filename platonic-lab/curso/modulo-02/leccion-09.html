<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lección 9: Demostración de la Fórmula de Euler | Matemáticas Visuales</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {delimiters: [{left: '$$', right: '$$', display: true}, {left: '\\(', right: '\\)', display: false}]});"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .mono { font-family: 'JetBrains Mono', monospace; }
        .glow-text { text-shadow: 0 0 20px rgba(168, 85, 247, 0.5); }
        .progress-bar { background: linear-gradient(90deg, #a855f7, #22d3ee); }
        .katex { color: inherit; font-size: 1.1em; }
    </style>
</head>
<body class="bg-black text-gray-100 min-h-screen">
    <header class="border-b border-gray-900 bg-black/80 backdrop-blur-sm sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-6 py-4">
            <div class="flex justify-between items-center">
                <div>
                    <nav class="text-xs text-gray-600 mb-1">
                        <a href="../../../../../_portal/index.html" class="hover:text-violet-400 transition">EigenLab</a>
                        <span class="mx-1">/</span>
                        <a href="../../../index.html" class="hover:text-violet-400 transition">Math Visual Lab</a>
                        <span class="mx-1">/</span>
                        <a href="../../index.html" class="hover:text-violet-400 transition">Platonic Lab</a>
                        <span class="mx-1">/</span>
                        <a href="../index.html" class="hover:text-violet-400 transition">Curso</a>
                        <span class="mx-1">/</span>
                        <span class="text-gray-500">Módulo 02</span>
                    </nav>
                    <h1 class="text-lg font-light">
                        <span class="text-violet-400 font-medium glow-text">Lección 9</span> — Demostración de la Fórmula de Euler
                    </h1>
                </div>
                <nav class="flex gap-2 text-sm">
                    <a href="./leccion-08.html" class="px-3 py-2 rounded-lg hover:bg-gray-900 text-gray-400 transition">← Anterior</a>
                    <a href="./leccion-10.html" class="px-3 py-2 rounded-lg bg-violet-500/10 text-violet-400 hover:bg-violet-500/20 transition">Siguiente →</a>
                </nav>
            </div>
        </div>
    </header>

    <div class="max-w-6xl mx-auto px-6 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <aside class="lg:col-span-1">
                <div class="bg-gray-950 border border-gray-900 rounded-2xl p-6 sticky top-24">
                    <h3 class="text-lg font-semibold mb-4 text-cyan-400">Módulo 02</h3>
                    <p class="text-sm text-gray-500 mb-4">La Fórmula de Euler</p>
                    <div class="mb-6">
                        <div class="flex justify-between text-xs text-gray-400 mb-2">
                            <span>Progreso</span>
                            <span>3/6</span>
                        </div>
                        <div class="w-full bg-gray-800 rounded-full h-2">
                            <div class="progress-bar h-2 rounded-full" style="width: 50%"></div>
                        </div>
                    </div>
                    <nav class="space-y-2">
                        <a href="./leccion-07.html" class="block px-3 py-2 rounded-lg hover:bg-gray-900 text-gray-400 text-sm transition">7. Vértices, Aristas y Caras</a>
                        <a href="./leccion-08.html" class="block px-3 py-2 rounded-lg hover:bg-gray-900 text-gray-400 text-sm transition">8. La Fórmula de Euler</a>
                        <a href="./leccion-09.html" class="block px-3 py-2 rounded-lg bg-violet-500/10 text-violet-400 text-sm">9. Demostración Visual</a>
                        <a href="./leccion-10.html" class="block px-3 py-2 rounded-lg hover:bg-gray-900 text-gray-400 text-sm transition">10. Verificación en 5 Sólidos</a>
                        <a href="./leccion-11.html" class="block px-3 py-2 rounded-lg hover:bg-gray-900 text-gray-400 text-sm transition">11. ¿Por qué Solo 5?</a>
                        <a href="./leccion-12.html" class="block px-3 py-2 rounded-lg hover:bg-gray-900 text-gray-400 text-sm transition">12. Topología y la Esfera</a>
                    </nav>
                </div>
            </aside>

            <main class="lg:col-span-3">
                <article class="bg-gray-950 border border-gray-900 rounded-2xl p-8">
                    <div class="mb-8">
                        <div class="flex items-center justify-between mb-4">
                            <span class="text-cyan-400 text-sm font-medium">Lección 9</span>
                            <span class="text-gray-400 text-sm">~30 min</span>
                        </div>
                        <h1 class="text-3xl font-bold mb-4 text-violet-400 glow-text">Demostración de la Fórmula de Euler</h1>
                        <p class="text-gray-400 text-lg">Una prueba rigurosa de \(V - E + F = 2\) por eliminación de triángulos.</p>
                    </div>

                    <div class="prose prose-invert max-w-none">

                        <h2 class="text-2xl font-semibold text-violet-400 mb-4">Estrategia de la Demostración</h2>
                        <p class="text-gray-300 mb-4">
                            Queremos demostrar que para todo poliedro convexo, \(V - E + F = 2\). La estrategia es transformar el poliedro en un objeto más simple — un único triángulo — mediante operaciones que <strong class="text-cyan-400">no cambian</strong> el valor de \(V - E + F\). Si al final obtenemos un triángulo con \(V - E + F = 1\) (más la cara que removimos al inicio), el resultado es 2.
                        </p>
                        <p class="text-gray-300 mb-6">
                            La demostración que presentamos se atribuye a Cauchy (1813), aunque sus ideas centrales se remontan a Euler y Legendre. Es una prueba <strong class="text-cyan-400">constructiva</strong>: no solo demuestra que la fórmula es cierta, sino que exhibe un algoritmo para reducir cualquier poliedro a un triángulo.
                        </p>

                        <h2 class="text-2xl font-semibold text-violet-400 mb-4">Paso 1: Del Poliedro al Plano</h2>
                        <p class="text-gray-300 mb-4">
                            Tomamos un poliedro convexo y <strong class="text-cyan-400">removemos una cara</strong>. La superficie restante es topológicamente un disco: tiene un borde (el contorno de la cara removida) y puede "aplanarse" sobre un plano sin romper ni pegar nada.
                        </p>
                        <p class="text-gray-300 mb-4">
                            El resultado de este aplanamiento se llama <strong class="text-cyan-400">diagrama de Schlegel</strong>: un grafo plano donde la cara removida se convierte en la región exterior, y las demás caras ocupan el interior.
                        </p>
                        <div class="bg-gray-900/50 rounded-lg p-6 mb-6 border-l-4 border-violet-400">
                            <p class="text-gray-200">
                                Al remover una cara: \(F \to F - 1\), pero \(V\) y \(E\) no cambian.
                            </p>
                            <p class="text-gray-200 mt-2">
                                Si demostramos que el diagrama aplanado tiene \(V - E + F' = 1\) (donde \(F' = F - 1\)), entonces el poliedro original tiene \(V - E + F = 2\).
                            </p>
                        </div>

                        <h2 class="text-2xl font-semibold text-violet-400 mb-4">Paso 2: Triangulación</h2>
                        <p class="text-gray-300 mb-4">
                            Si alguna cara del diagrama no es un triángulo (tiene más de 3 lados), la dividimos en triángulos añadiendo <strong class="text-cyan-400">diagonales</strong> interiores. Cada diagonal añade exactamente 1 arista y 1 cara:
                        </p>
                        <div class="bg-gray-900/50 rounded-lg p-4 mb-6 border-l-4 border-violet-400">
                            <p class="text-gray-200">
                                Diagonal: \(E \to E + 1\), \(F \to F + 1\) \(\implies V - E + F\) <strong>no cambia</strong>.
                            </p>
                        </div>
                        <p class="text-gray-300 mb-6">
                            Tras triangular, todas las caras interiores son triángulos. Un polígono de \(n\) lados se triangula con \(n - 3\) diagonales, produciendo \(n - 2\) triángulos.
                        </p>

                        <h2 class="text-2xl font-semibold text-violet-400 mb-4">Paso 3: Eliminación de Triángulos</h2>
                        <p class="text-gray-300 mb-4">
                            Ahora eliminamos triángulos del borde, uno por uno. Un <strong class="text-cyan-400">triángulo de borde</strong> es aquel que tiene al menos una arista en el contorno exterior del diagrama. Hay dos tipos posibles:
                        </p>

                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                            <div class="bg-violet-500/10 border border-violet-500/30 rounded-lg p-5">
                                <h4 class="font-semibold text-violet-400 mb-3">Tipo A: 1 arista en el borde</h4>
                                <p class="text-gray-300 text-sm mb-2">Removemos esa arista y la cara del triángulo. Los 3 vértices permanecen.</p>
                                <div class="mono text-sm text-gray-400 mt-3 space-y-1">
                                    <p>\(\Delta V = 0\)</p>
                                    <p>\(\Delta E = -1\)</p>
                                    <p>\(\Delta F = -1\)</p>
                                    <p class="text-cyan-400">\(\Delta(V\!-\!E\!+\!F) = 0\)</p>
                                </div>
                            </div>
                            <div class="bg-violet-500/10 border border-violet-500/30 rounded-lg p-5">
                                <h4 class="font-semibold text-violet-400 mb-3">Tipo B: 2 aristas en el borde</h4>
                                <p class="text-gray-300 text-sm mb-2">El vértice donde se unen las dos aristas de borde queda "libre" (grado 2). Removemos las 2 aristas, el vértice y la cara.</p>
                                <div class="mono text-sm text-gray-400 mt-3 space-y-1">
                                    <p>\(\Delta V = -1\)</p>
                                    <p>\(\Delta E = -2\)</p>
                                    <p>\(\Delta F = -1\)</p>
                                    <p class="text-cyan-400">\(\Delta(V\!-\!E\!+\!F) = 0\)</p>
                                </div>
                            </div>
                        </div>

                        <p class="text-gray-300 mb-6">
                            En ambos casos, \(V - E + F\) <strong class="text-cyan-400">no cambia</strong>. Un triángulo no puede tener 3 aristas en el borde (eso significaría que es el último triángulo y no tiene vecinos interiores). Además, siempre existe al menos un triángulo de borde (el grafo triangulado tiene borde finito), así que el proceso no se atasca.
                        </p>

                        <h2 class="text-2xl font-semibold text-violet-400 mb-4">Paso 4: Conclusión</h2>
                        <p class="text-gray-300 mb-4">
                            Repitiendo la eliminación, eventualmente nos queda un único triángulo:
                        </p>
                        <div class="bg-violet-500/5 border border-violet-500/20 rounded-2xl p-6 mb-6 text-center">
                            <p class="text-gray-400 text-sm mb-2">Triángulo final</p>
                            <p class="text-xl mono text-gray-200">\(V = 3, \quad E = 3, \quad F = 1\)</p>
                            <p class="text-xl mono text-cyan-400 mt-2">\(V - E + F = 3 - 3 + 1 = 1\)</p>
                        </div>
                        <p class="text-gray-300 mb-4">
                            Como \(V - E + F\) no cambió en ningún paso, el diagrama de Schlegel original (sin la cara exterior) también tenía \(V - E + F = 1\). Restaurando la cara removida en el Paso 1:
                        </p>
                        <div class="bg-violet-500/5 border border-violet-500/20 rounded-2xl p-6 mb-6 text-center">
                            <p class="text-2xl mono text-violet-300">\(V - E + (F + 1) = 1 + 1 = 2 \quad \blacksquare\)</p>
                        </div>

                        <h2 class="text-2xl font-semibold text-violet-400 mb-4">Generalidad de la Demostración</h2>
                        <p class="text-gray-300 mb-4">
                            Hemos ilustrado la demostración con un cubo, pero funciona para <strong>cualquier</strong> poliedro convexo. Los ingredientes clave son:
                        </p>
                        <ol class="list-decimal list-inside space-y-2 text-gray-300 mb-6 ml-4">
                            <li><strong class="text-cyan-400">Convexidad</strong>: garantiza que al remover una cara y aplanar, obtenemos un grafo plano sin cruces.</li>
                            <li><strong class="text-cyan-400">Triangulación</strong>: cualquier polígono puede triangularse (un resultado clásico de geometría computacional).</li>
                            <li><strong class="text-cyan-400">Existencia de triángulos de borde</strong>: un grafo plano triangulado con más de un triángulo siempre tiene al menos un triángulo con una arista en el borde exterior.</li>
                        </ol>
                        <p class="text-gray-300 mb-6">
                            De hecho, la demostración funciona para cualquier poliedro <strong>homeomorfo a la esfera</strong> — no necesita ser convexo, solo que su superficie sea topológicamente una esfera (sin agujeros).
                        </p>

                        <h2 class="text-2xl font-semibold text-violet-400 mb-4">Demostración Alternativa: Geometría Esférica</h2>
                        <p class="text-gray-300 mb-4">
                            Legendre (1794) dio una prueba completamente distinta usando áreas esféricas. La idea: proyectar el poliedro sobre su esfera circunscrita. Las caras se convierten en polígonos esféricos, y por el <strong class="text-cyan-400">teorema de Girard</strong>, el área de un triángulo esférico con ángulos \(\alpha, \beta, \gamma\) es:
                        </p>
                        <div class="bg-gray-900/50 rounded-lg p-4 mb-4 border-l-4 border-violet-400">
                            <p class="text-gray-200 text-center">\(A = (\alpha + \beta + \gamma - \pi) R^2\)</p>
                        </div>
                        <p class="text-gray-300 mb-6">
                            Sumando las áreas de todos los triángulos (después de triangular las caras) y usando que la suma total es \(4\pi R^2\) (área de la esfera) y que los ángulos se reparten entre vértices, se obtiene \(V - E + F = 2\). Esta prueba conecta la fórmula de Euler con la <strong class="text-cyan-400">curvatura</strong> de la esfera, un tema que retomaremos en la Lección 12.
                        </p>

                        <h2 class="text-2xl font-semibold text-violet-400 mb-4">Ejercicios</h2>
                        <div class="bg-violet-500/10 border border-violet-500/30 rounded-lg p-6 mb-6">
                            <ol class="list-decimal list-inside space-y-4 text-gray-300">
                                <li>Ejecuta la demostración por eliminación para el <strong>tetraedro</strong>: dibuja su diagrama de Schlegel (un triángulo con un punto interior), y elimina triángulos hasta llegar a uno solo. ¿Cuántos pasos necesitas?</li>
                                <li>El octaedro tiene 8 caras triangulares. Su diagrama de Schlegel es un triángulo exterior con un triángulo interior invertido y 6 conexiones. Dibújalo y cuenta \(V\), \(E\), \(F\) (sin la cara exterior). Verifica que \(V - E + F = 1\).</li>
                                <li>En la triangulación de un cuadrilátero, ¿cuántas diagonales se añaden y cuántos triángulos se obtienen? ¿Y para un pentágono? Verifica que en ambos casos \(\Delta E = \Delta F\).</li>
                                <li>¿Puede existir un triángulo de borde con 3 aristas en el borde exterior? Argumenta por qué no (piensa en qué significaría para el grafo restante).</li>
                                <li>Usando el teorema de Girard, calcula el área de un triángulo esférico equilátero con ángulos de \(90°\) cada uno, sobre una esfera de radio \(R\). ¿Qué fracción del área total de la esfera ocupa?</li>
                            </ol>
                        </div>
                    </div>

                    <!-- LAB: Interactive Proof -->
                    <div class="mt-10">
                        <h2 class="text-2xl font-bold text-cyan-400 mb-4">LAB: Demostración Paso a Paso</h2>
                        <p class="text-gray-400 mb-4">Recorre la demostración completa para un cubo: desde el diagrama de Schlegel hasta el triángulo final.</p>

                        <div class="rounded-xl border border-gray-800 overflow-hidden" style="background:#030712;">
                            <div class="flex justify-center p-6">
                                <svg id="proof-svg" viewBox="0 0 300 300" width="300" height="300" style="max-width:100%;"></svg>
                            </div>
                            <div class="border-t border-gray-800 p-4">
                                <div class="text-center mono mb-3">
                                    <div id="step-vef" class="text-sm text-gray-400"></div>
                                    <div id="step-euler" class="text-base text-gray-200 mt-1"></div>
                                </div>
                                <p id="step-desc" class="text-sm text-gray-400 text-center mb-4 min-h-[2.5rem]"></p>
                                <div class="flex justify-between items-center">
                                    <button id="prev-btn" class="px-4 py-2 rounded-lg bg-gray-900 hover:bg-gray-800 text-gray-400 text-sm border border-gray-800 transition">← Anterior</button>
                                    <span id="step-counter" class="text-xs text-gray-600 mono"></span>
                                    <button id="next-btn" class="px-4 py-2 rounded-lg bg-violet-500/10 hover:bg-violet-500/20 text-violet-400 text-sm border border-violet-500/30 transition">Siguiente →</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <script>
                    (function(){
                        var svg = document.getElementById('proof-svg');
                        var ns = 'http://www.w3.org/2000/svg';
                        var vx = [[35,35],[265,35],[265,265],[35,265],[110,110],[190,110],[190,190],[110,190]];
                        var ED = [[0,1],[1,2],[2,3],[3,0],[4,5],[5,6],[6,7],[7,4],[0,4],[1,5],[2,6],[3,7],[0,5],[1,6],[2,7],[3,4],[4,6]];
                        var TR = [[0,1,5],[0,5,4],[1,2,6],[1,6,5],[2,3,7],[2,7,6],[3,0,4],[3,4,7],[4,5,6],[4,6,7]];
                        var QD = [[0,1,5,4],[1,2,6,5],[2,3,7,6],[3,0,4,7],[4,5,6,7]];

                        var steps = [
                            {v:[0,1,2,3,4,5,6,7], e:[0,1,2,3,4,5,6,7,8,9,10,11], t:[], q:[0,1,2,3,4],
                             V:8, E:12, F:5, desc:'Diagrama de Schlegel del cubo: removimos la cara superior (exterior). Quedan 5 caras.'},
                            {v:[0,1,2,3,4,5,6,7], e:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16], t:[0,1,2,3,4,5,6,7,8,9], q:[],
                             V:8, E:17, F:10, desc:'Triangulación: +5 diagonales dividen los 5 cuadriláteros en 10 triángulos. V\u2212E+F no cambia.'},
                            {v:[0,1,2,3,4,5,6,7], e:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16], t:[1,2,3,4,5,6,7,8,9], q:[],
                             V:8, E:16, F:9, desc:'Tipo A: quitar tri\u00e1ngulo 0\u20131\u20135. Removemos la arista de borde 0\u20131. (\u2212 1E, \u2212 1F)'},
                            {v:[0,1,2,3,4,5,6,7], e:[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16], t:[1,3,4,5,6,7,8,9], q:[],
                             V:8, E:15, F:8, desc:'Tipo A: quitar tri\u00e1ngulo 1\u20132\u20136. Removemos arista de borde 1\u20132. (\u2212 1E, \u2212 1F)'},
                            {v:[0,1,2,3,4,5,6,7], e:[3,4,5,6,7,8,9,10,11,12,13,14,15,16], t:[1,3,5,6,7,8,9], q:[],
                             V:8, E:14, F:7, desc:'Tipo A: quitar tri\u00e1ngulo 2\u20133\u20137. Removemos arista de borde 2\u20133. (\u2212 1E, \u2212 1F)'},
                            {v:[0,1,2,3,4,5,6,7], e:[4,5,6,7,8,9,10,11,12,13,14,15,16], t:[1,3,5,7,8,9], q:[],
                             V:8, E:13, F:6, desc:'Tipo A: quitar tri\u00e1ngulo 3\u20130\u20134. Removemos arista de borde 3\u20130. (\u2212 1E, \u2212 1F)'},
                            {v:[1,2,3,4,5,6,7], e:[4,5,6,7,9,10,11,13,14,15,16], t:[3,5,7,8,9], q:[],
                             V:7, E:11, F:5, desc:'Tipo B: quitar tri\u00e1ngulo 0\u20135\u20134. V\u00e9rtice 0 queda libre: removemos 2 aristas y el v\u00e9rtice. (\u2212 1V, \u2212 2E, \u2212 1F)'},
                            {v:[2,3,4,5,6,7], e:[4,5,6,7,10,11,14,15,16], t:[5,7,8,9], q:[],
                             V:6, E:9, F:4, desc:'Tipo B: quitar tri\u00e1ngulo 1\u20136\u20135. V\u00e9rtice 1 queda libre. (\u2212 1V, \u2212 2E, \u2212 1F)'},
                            {v:[3,4,5,6,7], e:[4,5,6,7,11,15,16], t:[7,8,9], q:[],
                             V:5, E:7, F:3, desc:'Tipo B: quitar tri\u00e1ngulo 2\u20137\u20136. V\u00e9rtice 2 queda libre. (\u2212 1V, \u2212 2E, \u2212 1F)'},
                            {v:[4,5,6,7], e:[4,5,6,7,16], t:[8,9], q:[],
                             V:4, E:5, F:2, desc:'Tipo B: quitar tri\u00e1ngulo 3\u20134\u20137. V\u00e9rtice 3 queda libre. (\u2212 1V, \u2212 2E, \u2212 1F)'},
                            {v:[4,5,6], e:[4,5,16], t:[8], q:[],
                             V:3, E:3, F:1, desc:'Tipo B: quitar tri\u00e1ngulo 4\u20136\u20137. V\u00e9rtice 7 queda libre. Queda un \u00fanico tri\u00e1ngulo: V\u2212E+F = 1. Sumando la cara removida: 2. \u25a0'}
                        ];

                        var cur = 0;

                        function el(tag, attrs){
                            var e = document.createElementNS(ns, tag);
                            for(var k in attrs) e.setAttribute(k, attrs[k]);
                            return e;
                        }

                        function render(idx){
                            while(svg.firstChild) svg.removeChild(svg.firstChild);
                            var s = steps[idx];
                            var prev = idx > 0 ? steps[idx-1] : null;
                            var rmV = prev ? prev.v.filter(function(x){return s.v.indexOf(x)<0;}) : [];
                            var rmE = prev ? prev.e.filter(function(x){return s.e.indexOf(x)<0;}) : [];
                            var rmT = prev ? prev.t.filter(function(x){return s.t.indexOf(x)<0;}) : [];
                            var rmQ = prev ? prev.q.filter(function(x){return s.q.indexOf(x)<0;}) : [];

                            // Draw active quads
                            s.q.forEach(function(qi){
                                var pts = QD[qi].map(function(vi){return vx[vi][0]+','+vx[vi][1];}).join(' ');
                                svg.appendChild(el('polygon',{points:pts, fill:'rgba(167,139,250,0.08)', stroke:'none'}));
                            });
                            // Draw active triangles
                            s.t.forEach(function(ti){
                                var pts = TR[ti].map(function(vi){return vx[vi][0]+','+vx[vi][1];}).join(' ');
                                svg.appendChild(el('polygon',{points:pts, fill:'rgba(167,139,250,0.08)', stroke:'none'}));
                            });
                            // Draw removed faces (red flash)
                            rmT.forEach(function(ti){
                                var pts = TR[ti].map(function(vi){return vx[vi][0]+','+vx[vi][1];}).join(' ');
                                svg.appendChild(el('polygon',{points:pts, fill:'rgba(248,113,113,0.12)', stroke:'none'}));
                            });
                            rmQ.forEach(function(qi){
                                var pts = QD[qi].map(function(vi){return vx[vi][0]+','+vx[vi][1];}).join(' ');
                                svg.appendChild(el('polygon',{points:pts, fill:'rgba(248,113,113,0.12)', stroke:'none'}));
                            });

                            // Draw active edges
                            s.e.forEach(function(ei){
                                var e = ED[ei];
                                svg.appendChild(el('line',{x1:vx[e[0]][0],y1:vx[e[0]][1],x2:vx[e[1]][0],y2:vx[e[1]][1],
                                    stroke: ei>=12 && idx>=1 ? '#22d3ee' : '#a78bfa',
                                    'stroke-width':'2', opacity: ei>=12 && idx===1 ? '0.8' : '0.6'}));
                            });
                            // Draw removed edges (red dashed)
                            rmE.forEach(function(ei){
                                var e = ED[ei];
                                svg.appendChild(el('line',{x1:vx[e[0]][0],y1:vx[e[0]][1],x2:vx[e[1]][0],y2:vx[e[1]][1],
                                    stroke:'#f87171','stroke-width':'2','stroke-dasharray':'5,4',opacity:'0.5'}));
                            });

                            // Draw active vertices
                            s.v.forEach(function(vi){
                                svg.appendChild(el('circle',{cx:vx[vi][0],cy:vx[vi][1],r:'8',fill:'#22d3ee'}));
                                var t = el('text',{x:vx[vi][0],y:vx[vi][1]+3.5,'text-anchor':'middle',fill:'#030712','font-size':'10','font-weight':'bold','font-family':'Inter'});
                                t.textContent = vi;
                                svg.appendChild(t);
                            });
                            // Draw removed vertices (red)
                            rmV.forEach(function(vi){
                                svg.appendChild(el('circle',{cx:vx[vi][0],cy:vx[vi][1],r:'8',fill:'#f87171',opacity:'0.4'}));
                                var t = el('text',{x:vx[vi][0],y:vx[vi][1]+3.5,'text-anchor':'middle',fill:'#f87171','font-size':'10','font-weight':'bold','font-family':'Inter',opacity:'0.5'});
                                t.textContent = vi;
                                svg.appendChild(t);
                            });

                            // Update text
                            document.getElementById('step-vef').innerHTML =
                                'V = <span style="color:#22d3ee">'+s.V+'</span> &nbsp; E = <span style="color:#a78bfa">'+s.E+'</span> &nbsp; F = <span style="color:#a78bfa">'+s.F+'</span>';
                            document.getElementById('step-euler').innerHTML =
                                'V \u2212 E + F = '+s.V+' \u2212 '+s.E+' + '+s.F+' = <span style="color:#22d3ee;font-weight:600">1</span>' +
                                (idx === steps.length-1 ? ' <span style="color:#9ca3af">\u2192 +1 cara = </span><span style="color:#22d3ee;font-weight:600">2</span>' : '');
                            document.getElementById('step-desc').textContent = s.desc;
                            document.getElementById('step-counter').textContent = (idx+1)+'/'+steps.length;

                            document.getElementById('prev-btn').disabled = idx===0;
                            document.getElementById('prev-btn').style.opacity = idx===0?'0.3':'1';
                            document.getElementById('next-btn').disabled = idx===steps.length-1;
                            document.getElementById('next-btn').style.opacity = idx===steps.length-1?'0.3':'1';
                        }

                        document.getElementById('prev-btn').addEventListener('click',function(){if(cur>0){cur--;render(cur);}});
                        document.getElementById('next-btn').addEventListener('click',function(){if(cur<steps.length-1){cur++;render(cur);}});

                        render(0);
                    })();
                    </script>

                    <div class="mt-12 pt-8 border-t border-gray-800 flex justify-between items-center">
                        <a href="./leccion-08.html" class="px-6 py-3 bg-gray-900 hover:bg-gray-800 text-gray-400 rounded-lg font-semibold transition">
                            ← La Fórmula de Euler
                        </a>
                        <a href="./leccion-10.html" class="px-6 py-3 bg-violet-500/10 text-violet-400 hover:bg-violet-500/20 rounded-lg font-semibold transition">
                            Siguiente: Verificación →
                        </a>
                    </div>
                </article>
            </main>
        </div>
    </div>

    <footer class="border-t border-gray-900 py-6 mt-12">
        <div class="max-w-6xl mx-auto px-6 text-center">
            <nav class="text-xs text-gray-600 mb-2">
                <a href="../../../../../_portal/index.html" class="hover:text-violet-400 transition">EigenLab</a>
                <span class="mx-1">/</span>
                <a href="../../../index.html" class="hover:text-violet-400 transition">Math Visual Lab</a>
                <span class="mx-1">/</span>
                <a href="../../index.html" class="hover:text-violet-400 transition">Platonic Lab</a>
                <span class="mx-1">/</span>
                <a href="../index.html" class="hover:text-violet-400 transition">Curso</a>
                <span class="mx-1">/</span>
                <span class="text-gray-500">Módulo 02</span>
            </nav>
            <p class="text-gray-700 text-sm mono">Módulo 02 · La Fórmula de Euler</p>
        </div>
    </footer>
</body>
</html>
