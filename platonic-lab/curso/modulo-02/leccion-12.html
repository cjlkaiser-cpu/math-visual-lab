<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leccion 12: Topologia y la Esfera | Matematicas Visuales</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;500;600&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- KaTeX -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {delimiters: [{left: '$$', right: '$$', display: true}, {left: '\\(', right: '\\)', display: false}]});"></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .mono { font-family: 'JetBrains Mono', monospace; }
        .glow-text { text-shadow: 0 0 20px rgba(168, 85, 247, 0.5); }
        .progress-bar { background: linear-gradient(90deg, #a855f7, #22d3ee); }
        .katex { color: inherit; font-size: 1.1em; }
    </style>
</head>
<body class="bg-black text-gray-100 min-h-screen">
    <!-- Header -->
    <header class="border-b border-gray-900 bg-black/80 backdrop-blur-sm sticky top-0 z-50">
        <div class="max-w-6xl mx-auto px-6 py-4">
            <div class="flex justify-between items-center">
                <div>
                    <nav class="text-xs text-gray-600 mb-1">
                        <a href="../../../../../_portal/index.html" class="hover:text-violet-400 transition">EigenLab</a>
                        <span class="mx-1">/</span>
                        <a href="../../../index.html" class="hover:text-violet-400 transition">Math Visual Lab</a>
                        <span class="mx-1">/</span>
                        <a href="../../index.html" class="hover:text-violet-400 transition">Platonic Lab</a>
                        <span class="mx-1">/</span>
                        <a href="../index.html" class="hover:text-violet-400 transition">Curso</a>
                        <span class="mx-1">/</span>
                        <span class="text-gray-500">Modulo 02</span>
                    </nav>
                    <h1 class="text-lg font-light">
                        <span class="text-violet-400 font-medium glow-text">Leccion 12</span> — Topologia y la Esfera
                    </h1>
                </div>
                <nav class="flex gap-2 text-sm">
                    <a href="./leccion-11.html" class="px-3 py-2 rounded-lg hover:bg-gray-900 text-gray-400 transition">&larr; Anterior</a>
                    <a href="../modulo-03/leccion-13.html" class="px-3 py-2 rounded-lg bg-violet-500/10 text-violet-400 hover:bg-violet-500/20 transition">Modulo 3 &rarr;</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Layout -->
    <div class="max-w-6xl mx-auto px-6 py-8">
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <!-- Sidebar -->
            <aside class="lg:col-span-1">
                <div class="bg-gray-950 border border-gray-900 rounded-2xl p-6 sticky top-24">
                    <h3 class="text-lg font-semibold mb-4 text-cyan-400">Modulo 02</h3>
                    <p class="text-sm text-gray-500 mb-4">La Formula de Euler</p>

                    <div class="mb-6">
                        <div class="flex justify-between text-xs text-gray-400 mb-2">
                            <span>Progreso</span>
                            <span>6/6</span>
                        </div>
                        <div class="w-full bg-gray-800 rounded-full h-2">
                            <div class="progress-bar h-2 rounded-full" style="width: 100%"></div>
                        </div>
                    </div>

                    <div class="mb-4 p-3 bg-violet-500/10 border border-violet-500/30 rounded-lg">
                        <p class="text-violet-400 text-sm font-medium text-center">Modulo completado</p>
                    </div>

                    <nav class="space-y-2">
                        <a href="./leccion-07.html" class="block px-3 py-2 rounded-lg hover:bg-gray-900 text-gray-400 text-sm transition">7. Vertices, Aristas y Caras</a>
                        <a href="./leccion-08.html" class="block px-3 py-2 rounded-lg hover:bg-gray-900 text-gray-400 text-sm transition">8. La Formula de Euler</a>
                        <a href="./leccion-09.html" class="block px-3 py-2 rounded-lg hover:bg-gray-900 text-gray-400 text-sm transition">9. Demostracion Visual</a>
                        <a href="./leccion-10.html" class="block px-3 py-2 rounded-lg hover:bg-gray-900 text-gray-400 text-sm transition">10. De {p, q} a V, E, F</a>
                        <a href="./leccion-11.html" class="block px-3 py-2 rounded-lg hover:bg-gray-900 text-gray-400 text-sm transition">11. Por Que Solo 5</a>
                        <a href="./leccion-12.html" class="block px-3 py-2 rounded-lg bg-violet-500/10 text-violet-400 text-sm">12. Topologia y la Esfera</a>
                    </nav>
                </div>
            </aside>

            <!-- Content -->
            <main class="lg:col-span-3">
                <article class="bg-gray-950 border border-gray-900 rounded-2xl p-8">
                    <!-- Header -->
                    <div class="mb-8">
                        <div class="flex items-center justify-between mb-4">
                            <span class="text-cyan-400 text-sm font-medium">Leccion 12</span>
                            <span class="text-gray-400 text-sm">~30 min</span>
                        </div>
                        <h1 class="text-3xl font-bold mb-4 text-violet-400 glow-text">Topologia y la Esfera</h1>
                        <p class="text-gray-400 text-lg">La caracteristica de Euler como invariante topologico: por que \(\chi\) no depende de como subdivides, sino de la forma global de la superficie.</p>
                    </div>

                    <!-- Content -->
                    <div class="prose prose-invert max-w-none">

                        <!-- 1. Homeomorfismo -->
                        <h2 class="text-2xl font-semibold text-violet-400 mb-4">Homeomorfismo</h2>
                        <p class="text-gray-300 mb-4">
                            A lo largo de este modulo hemos visto que \(V - E + F = 2\) vale para <em>todo</em> poliedro convexo: tetraedros, cubos, prismas, piramides — poliedros con cantidades muy distintas de vertices, aristas y caras. Que tienen en comun?
                        </p>
                        <p class="text-gray-300 mb-4">
                            La respuesta es topologica. Dos superficies son <strong class="text-cyan-400">homeomorfas</strong> si una puede deformarse continuamente en la otra — estirando, doblando, comprimiendo — sin cortar ni pegar. Un cubo puede "inflarse" hasta convertirse en una esfera. Un prisma hexagonal tambien. Cualquier poliedro convexo tambien.
                        </p>
                        <p class="text-gray-300 mb-6">
                            La topologia estudia las propiedades que se preservan bajo homeomorfismos. Estas propiedades son <strong class="text-cyan-400">invariantes topologicos</strong>: cantidades que no cambian al deformar la superficie. La caracteristica de Euler \(\chi\) es uno de los mas fundamentales.
                        </p>

                        <!-- 2. χ es invariante -->
                        <h2 class="text-2xl font-semibold text-violet-400 mb-4">Por Que \(\chi\) No Cambia</h2>
                        <p class="text-gray-300 mb-4">
                            Afirmamos que \(\chi = V - E + F\) es un invariante topologico. Para entender esto, consideremos que pasa cuando <strong>refinamos</strong> una subdivision — es decir, cuando anadimos mas vertices, aristas y caras a una triangulacion existente.
                        </p>
                        <p class="text-gray-300 mb-4">
                            Hay tres operaciones basicas de refinamiento:
                        </p>

                        <div class="space-y-4 mb-6">
                            <div class="bg-gray-900/50 rounded-lg p-5 border-l-4 border-violet-400">
                                <p class="text-violet-400 font-medium mb-2">1. Subdividir una arista</p>
                                <p class="text-gray-300 text-sm">Insertar un vertice en medio de una arista existente. La arista se parte en 2, y cada cara adyacente gana una arista nueva.</p>
                                <p class="text-gray-400 text-sm mt-2">\(\Delta V = +1, \quad \Delta E = +1+k, \quad \Delta F = +k\) donde \(k\) = caras adyacentes.</p>
                                <p class="text-gray-400 text-sm">Para una arista interior (\(k=2\)): \(\Delta\chi = 1 - 3 + 2 = 0\).</p>
                            </div>

                            <div class="bg-gray-900/50 rounded-lg p-5 border-l-4 border-violet-400">
                                <p class="text-violet-400 font-medium mb-2">2. Conectar dos vertices de una misma cara</p>
                                <p class="text-gray-300 text-sm">Anadir una arista diagonal que divide una cara en dos.</p>
                                <p class="text-gray-400 text-sm mt-2">\(\Delta V = 0, \quad \Delta E = +1, \quad \Delta F = +1\).</p>
                                <p class="text-gray-400 text-sm">\(\Delta\chi = 0 - 1 + 1 = 0\).</p>
                            </div>

                            <div class="bg-gray-900/50 rounded-lg p-5 border-l-4 border-violet-400">
                                <p class="text-violet-400 font-medium mb-2">3. Insertar un vertice dentro de una cara</p>
                                <p class="text-gray-300 text-sm">Colocar un vertice nuevo en el interior de una cara y conectarlo a todos los vertices de esa cara.</p>
                                <p class="text-gray-400 text-sm mt-2">Para un triangulo: \(\Delta V = +1, \quad \Delta E = +3, \quad \Delta F = +2\).</p>
                                <p class="text-gray-400 text-sm">\(\Delta\chi = 1 - 3 + 2 = 0\).</p>
                            </div>
                        </div>

                        <p class="text-gray-300 mb-6">
                            En cada caso, \(\Delta\chi = 0\). Como cualquier refinamiento de una subdivision se puede descomponer en estas operaciones elementales, <strong class="text-cyan-400">\(\chi\) es independiente de la subdivision elegida</strong>. Solo depende de la superficie subyacente.
                        </p>

                        <!-- 3. Clasificacion de superficies -->
                        <h2 class="text-2xl font-semibold text-violet-400 mb-4">Superficies Cerradas y Genero</h2>
                        <p class="text-gray-300 mb-4">
                            Una <strong>superficie cerrada orientable</strong> es una superficie sin borde que tiene un "dentro" y un "fuera" bien definidos. El teorema de clasificacion de superficies dice que toda superficie cerrada orientable es homeomorfa a una <strong class="text-cyan-400">esfera con \(g\) asas</strong>, donde \(g\) es el <strong>genero</strong> de la superficie.
                        </p>

                        <div class="bg-violet-500/5 border border-violet-500/20 rounded-2xl p-8 mb-6">
                            <p class="text-sm text-gray-500 uppercase tracking-wider mb-4 text-center">Caracteristica de Euler por genero</p>
                            <p class="text-center text-xl text-gray-200 mb-4">\(\chi = 2 - 2g\)</p>
                            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-center">
                                <div>
                                    <p class="text-3xl font-bold text-violet-400 mono">2</p>
                                    <p class="text-sm text-gray-400">\(g = 0\)</p>
                                    <p class="text-xs text-gray-500">Esfera</p>
                                </div>
                                <div>
                                    <p class="text-3xl font-bold text-cyan-400 mono">0</p>
                                    <p class="text-sm text-gray-400">\(g = 1\)</p>
                                    <p class="text-xs text-gray-500">Toro</p>
                                </div>
                                <div>
                                    <p class="text-3xl font-bold text-gray-400 mono">-2</p>
                                    <p class="text-sm text-gray-400">\(g = 2\)</p>
                                    <p class="text-xs text-gray-500">Doble toro</p>
                                </div>
                                <div>
                                    <p class="text-3xl font-bold text-gray-500 mono">2-2g</p>
                                    <p class="text-sm text-gray-400">\(g\) general</p>
                                    <p class="text-xs text-gray-500">\(g\) asas</p>
                                </div>
                            </div>
                        </div>

                        <!-- 4. El toro: χ = 0 -->
                        <h2 class="text-2xl font-semibold text-violet-400 mb-4">El Toro: \(\chi = 0\)</h2>
                        <p class="text-gray-300 mb-4">
                            Verifiquemos con un ejemplo concreto. Un toro se puede construir a partir de un cuadrado identificando los lados opuestos: el borde superior con el inferior, y el izquierdo con el derecho.
                        </p>
                        <p class="text-gray-300 mb-4">
                            Consideremos la triangulacion mas simple: dividir el cuadrado en una malla de \(m \times n\) rectangulos, cada uno partido en 2 triangulos. Al identificar los bordes:
                        </p>
                        <div class="bg-gray-900/50 rounded-lg p-6 mb-6 border-l-4 border-cyan-400">
                            <div class="text-gray-200 space-y-2">
                                <p>\(V = mn\) <span class="text-gray-500 text-sm ml-2">(los vertices de los bordes se fusionan al identificar)</span></p>
                                <p>\(E = 3mn\) <span class="text-gray-500 text-sm ml-2">(\(mn\) horizontales + \(mn\) verticales + \(mn\) diagonales)</span></p>
                                <p>\(F = 2mn\) <span class="text-gray-500 text-sm ml-2">(2 triangulos por rectangulo)</span></p>
                                <p class="text-violet-400 font-medium mt-3">\(\chi = mn - 3mn + 2mn = 0\)</p>
                            </div>
                        </div>
                        <p class="text-gray-300 mb-6">
                            Sin importar los valores de \(m\) y \(n\), el resultado es siempre \(\chi = 0\). Puedes refinar la malla tanto como quieras: la caracteristica de Euler no cambia. Esto confirma que \(\chi\) es una propiedad del toro, no de la triangulacion particular.
                        </p>

                        <!-- 5. Gauss-Bonnet -->
                        <h2 class="text-2xl font-semibold text-violet-400 mb-4">El Teorema de Gauss-Bonnet</h2>
                        <p class="text-gray-300 mb-4">
                            En la Leccion 8 demostramos que el defecto angular total de un poliedro convexo es \(\sum \delta_v = 2\pi\chi\). Este resultado tiene una generalizacion profunda: el <strong class="text-cyan-400">teorema de Gauss-Bonnet</strong>, que conecta la curvatura de una superficie suave con su topologia.
                        </p>
                        <div class="bg-violet-500/5 border border-violet-500/20 rounded-2xl p-8 mb-6">
                            <p class="text-sm text-gray-500 uppercase tracking-wider mb-3 text-center">Teorema de Gauss-Bonnet</p>
                            <p class="text-center text-xl text-gray-200 mb-2">$$\int_S K \, dA = 2\pi\chi(S)$$</p>
                            <p class="text-sm text-gray-500 text-center">donde \(K\) es la curvatura gaussiana y la integral recorre toda la superficie \(S\)</p>
                        </div>
                        <p class="text-gray-300 mb-4">
                            La <strong>curvatura gaussiana</strong> \(K\) mide como se curva una superficie en cada punto. En una esfera de radio \(R\), \(K = 1/R^2\) en todas partes (curvatura positiva constante). En un plano, \(K = 0\). En una silla de montar, \(K < 0\).
                        </p>
                        <p class="text-gray-300 mb-4">
                            Gauss-Bonnet dice que la curvatura total (la integral de \(K\) sobre toda la superficie) esta determinada por la topologia:
                        </p>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                            <div class="bg-gray-900/50 rounded-lg p-4 text-center border border-gray-800">
                                <p class="text-violet-400 font-medium mb-1">Esfera (\(g=0\))</p>
                                <p class="text-gray-300">\(\int K \, dA = 4\pi\)</p>
                                <p class="text-xs text-gray-500 mt-1">Toda la curvatura es positiva</p>
                            </div>
                            <div class="bg-gray-900/50 rounded-lg p-4 text-center border border-gray-800">
                                <p class="text-cyan-400 font-medium mb-1">Toro (\(g=1\))</p>
                                <p class="text-gray-300">\(\int K \, dA = 0\)</p>
                                <p class="text-xs text-gray-500 mt-1">Positiva fuera, negativa dentro: se cancela</p>
                            </div>
                            <div class="bg-gray-900/50 rounded-lg p-4 text-center border border-gray-800">
                                <p class="text-gray-400 font-medium mb-1">Genero \(g\)</p>
                                <p class="text-gray-300">\(\int K \, dA = 2\pi(2-2g)\)</p>
                                <p class="text-xs text-gray-500 mt-1">Cada asa resta \(4\pi\)</p>
                            </div>
                        </div>
                        <p class="text-gray-300 mb-6">
                            El defecto angular de Descartes (\(\sum \delta_v = 4\pi\)) es la version discreta de Gauss-Bonnet para la esfera. La formula de Euler (\(V-E+F=2\)) es la version combinatoria. Las tres expresan la misma verdad: <strong class="text-cyan-400">la curvatura total de una superficie cerrada esta determinada por su topologia</strong>.
                        </p>

                        <!-- 6. Euler-Poincare -->
                        <h2 class="text-2xl font-semibold text-violet-400 mb-4">La Formula de Euler-Poincare</h2>
                        <p class="text-gray-300 mb-4">
                            En dimensiones superiores, la alternancia de signos se extiende. Un <strong>politopo</strong> de dimension \(n\) tiene elementos de dimensiones \(0, 1, 2, \ldots, n-1\) (vertices, aristas, caras, celdas, ...). La <strong class="text-cyan-400">formula de Euler-Poincare</strong> es:
                        </p>
                        <div class="bg-gray-900/50 rounded-lg p-6 mb-6 border-l-4 border-violet-400">
                            <p class="text-xl text-center text-gray-200">\(\displaystyle\chi = \sum_{k=0}^{n-1} (-1)^k f_k = f_0 - f_1 + f_2 - f_3 + \cdots\)</p>
                            <p class="text-sm text-gray-500 text-center mt-2">donde \(f_k\) es el numero de elementos de dimension \(k\)</p>
                        </div>
                        <p class="text-gray-300 mb-4">
                            Para un poliedro 3D: \(\chi = f_0 - f_1 + f_2 = V - E + F\). Para un politopo 4D, aparece un termino mas: las <strong>celdas</strong> \(f_3\).
                        </p>

                        <div class="bg-violet-500/10 border border-violet-500/30 rounded-lg p-6 mb-6">
                            <h4 class="font-semibold text-violet-400 mb-3">Ejemplo: el teseracto (hipercubo 4D)</h4>
                            <div class="space-y-2 text-gray-300">
                                <p>\(f_0 = 16\) vertices, \(f_1 = 32\) aristas, \(f_2 = 24\) caras, \(f_3 = 8\) celdas cubicas</p>
                                <p>\(\chi = 16 - 32 + 24 - 8 = 0\)</p>
                                <p class="text-gray-400 text-sm mt-2">La frontera del teseracto es una 3-esfera (\(S^3\)), que tiene \(\chi = 0\). En general, \(\chi(S^n) = 1 + (-1)^n\): las esferas de dimension par tienen \(\chi = 2\) y las de dimension impar tienen \(\chi = 0\).</p>
                            </div>
                        </div>

                        <!-- 7. Recapitulacion del modulo -->
                        <h2 class="text-2xl font-semibold text-violet-400 mb-4">Recapitulacion del Modulo</h2>
                        <p class="text-gray-300 mb-4">
                            Este modulo construyo, pieza a pieza, una de las ideas mas profundas de la matematica:
                        </p>
                        <div class="space-y-3 mb-6">
                            <div class="flex items-start gap-3">
                                <span class="text-violet-400 mono text-sm mt-1">L7</span>
                                <p class="text-gray-300 text-sm">El <strong>doble conteo</strong> (\(pF = 2E\), \(qV = 2E\)) revela la estructura combinatoria de los poliedros.</p>
                            </div>
                            <div class="flex items-start gap-3">
                                <span class="text-violet-400 mono text-sm mt-1">L8</span>
                                <p class="text-gray-300 text-sm">La <strong>formula de Euler</strong> \(V - E + F = 2\) unifica todos los poliedros convexos en una sola ecuacion.</p>
                            </div>
                            <div class="flex items-start gap-3">
                                <span class="text-violet-400 mono text-sm mt-1">L9</span>
                                <p class="text-gray-300 text-sm">La <strong>demostracion de Cauchy</strong> prueba la formula por eliminacion de triangulos.</p>
                            </div>
                            <div class="flex items-start gap-3">
                                <span class="text-violet-400 mono text-sm mt-1">L10</span>
                                <p class="text-gray-300 text-sm">Las <strong>formulas combinatorias</strong> derivan \(V, E, F\) de \(\{p, q\}\) usando Euler + doble conteo.</p>
                            </div>
                            <div class="flex items-start gap-3">
                                <span class="text-violet-400 mono text-sm mt-1">L11</span>
                                <p class="text-gray-300 text-sm"><strong>Exactamente 5</strong>: tres pruebas convergentes, necesidad vs existencia, dimensiones superiores.</p>
                            </div>
                            <div class="flex items-start gap-3">
                                <span class="text-violet-400 mono text-sm mt-1">L12</span>
                                <p class="text-gray-300 text-sm"><strong>\(\chi\) como invariante topologico</strong>: genero, Gauss-Bonnet, Euler-Poincare.</p>
                            </div>
                        </div>
                        <p class="text-gray-300 mb-6">
                            El hilo conductor: una simple observacion numerica de Euler en 1750 resulto ser la punta de un iceberg que conecta la combinatoria discreta con la topologia, la curvatura diferencial y la geometria en dimensiones arbitrarias. En el Modulo 3 usaremos la formula de Euler para estudiar la <strong class="text-cyan-400">dualidad</strong>, la simetria mas elegante de los solidos platonicos.
                        </p>

                        <!-- 8. Ejercicios -->
                        <h2 class="text-2xl font-semibold text-violet-400 mb-4">Ejercicios</h2>
                        <div class="bg-violet-500/10 border border-violet-500/30 rounded-lg p-6 mb-6">
                            <ol class="list-decimal list-inside space-y-4 text-gray-300">
                                <li>Verifica que subdividir una arista interior (con 2 caras adyacentes) de una triangulacion da \(\Delta\chi = 0\). Cuenta cuidadosamente: \(\Delta V\), \(\Delta E\), \(\Delta F\).</li>
                                <li>Triangula un toro usando una malla \(3 \times 4\) (con identificacion de bordes). Cuenta \(V\), \(E\), \(F\) y verifica que \(\chi = 0\).
                                    <span class="text-gray-500 text-sm block ml-6 mt-1">(Pista: dibuja el cuadrado, marca la malla, identifica que vertices y aristas se fusionan.)</span>
                                </li>
                                <li>Una esfera de radio \(R\) tiene curvatura gaussiana \(K = 1/R^2\) y area \(4\pi R^2\). Verifica que \(\int K \, dA = 4\pi = 2\pi \chi\).</li>
                                <li>El 24-celda \(\{3,4,3\}\) tiene \(f_0 = 24\), \(f_1 = 96\), \(f_2 = 96\), \(f_3 = 24\). Calcula \(\chi\). Es consistente con la formula \(\chi(S^3) = 0\)?</li>
                                <li>Un poliedro tiene genero 2 (doble toro). Si tiene 24 aristas y 12 caras, cuantos vertices tiene?
                                    <span class="text-gray-500 text-sm block ml-6 mt-1">(Pista: usa \(\chi = 2 - 2g = V - E + F\).)</span>
                                </li>
                            </ol>
                        </div>
                    </div>

                    <!-- LAB Section -->
                    <div class="mt-10">
                        <h2 class="text-2xl font-bold text-cyan-400 mb-4">LAB: \(\chi\) es Invariante</h2>
                        <p class="text-gray-400 mb-4">Cambia la resolucion de la malla: \(V\), \(E\), \(F\) cambian, pero \(\chi\) permanece fijo. Cambia la superficie y observa como \(\chi\) salta.</p>

                        <div class="relative rounded-xl border border-gray-800 overflow-hidden" style="background:#030712;">
                            <canvas id="mini-lab" style="width:100%; height:400px; display:block; cursor:grab;"></canvas>
                            <div class="absolute top-4 left-4 text-left mono">
                                <div class="text-base font-medium text-gray-300 mb-1" id="surf-name">Esfera (g=0)</div>
                            </div>
                            <div class="absolute bottom-4 left-0 right-0 text-center mono" id="chi-display"></div>
                        </div>

                        <!-- Controls -->
                        <div class="mt-3 grid grid-cols-2 gap-4">
                            <div>
                                <div class="text-xs text-gray-600 mb-1.5 mono">Superficie</div>
                                <div class="flex flex-wrap gap-2">
                                    <button data-surf="0" class="surf-btn px-4 py-2 rounded-lg text-sm transition border mono">Esfera</button>
                                    <button data-surf="1" class="surf-btn px-4 py-2 rounded-lg text-sm transition border mono">Toro</button>
                                </div>
                            </div>
                            <div>
                                <div class="text-xs text-gray-600 mb-1.5 mono">Resolucion</div>
                                <input type="range" id="res-slider" min="3" max="24" value="8" class="w-full accent-violet-500">
                                <div class="text-xs text-gray-600 mt-1 mono" id="res-label">n = 8</div>
                            </div>
                        </div>
                    </div>

                    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
                    <script>
                    (function(){
                        var canvas = document.getElementById('mini-lab');
                        var renderer = new THREE.WebGLRenderer({canvas:canvas, antialias:true});
                        renderer.setPixelRatio(Math.min(window.devicePixelRatio,2));
                        renderer.setClearColor(0x030712);

                        var scene = new THREE.Scene();
                        var camera = new THREE.PerspectiveCamera(35,2,0.1,100);
                        camera.position.z = 6;

                        var group, rotX=0.3, rotY=0.5, dragging=false, px,py, autoRot=true, autoTimer;
                        var curSurf = 0, curRes = 8;

                        function buildSphere(n){
                            // Icosphere: use IcosahedronGeometry with detail = floor(n/4)
                            var detail = Math.max(0, Math.floor(n / 4));
                            var geo = new THREE.IcosahedronGeometry(1.5, detail);
                            // Count unique vertices
                            var pos = geo.getAttribute('position');
                            var seen = {}, verts = [];
                            for(var i=0;i<pos.count;i++){
                                var k = pos.getX(i).toFixed(4)+','+pos.getY(i).toFixed(4)+','+pos.getZ(i).toFixed(4);
                                if(!seen[k]){ seen[k]=1; verts.push(pos.getX(i),pos.getY(i),pos.getZ(i)); }
                            }
                            var V = verts.length / 3;
                            var F = pos.count / 3; // each triangle = 3 position entries
                            var E = (V + F - 2); // from Euler (we know chi=2 for sphere, but let's derive)
                            // Actually, for a triangulation: 3F = 2E => E = 3F/2
                            E = 3 * F / 2;
                            var chi = V - E + F;
                            return {geo:geo, V:V, E:Math.round(E), F:F, chi:Math.round(chi), verts:verts};
                        }

                        function buildTorus(n){
                            var m = n; // segments around tube
                            var nn = Math.max(3, Math.round(n * 1.5)); // segments around ring
                            var R = 1.2, r = 0.5;
                            var vertices = [];
                            var indices = [];

                            // Generate vertices
                            for(var i=0;i<nn;i++){
                                for(var j=0;j<m;j++){
                                    var theta = 2*Math.PI*i/nn;
                                    var phi = 2*Math.PI*j/m;
                                    var x = (R + r*Math.cos(phi))*Math.cos(theta);
                                    var y = r*Math.sin(phi);
                                    var z = (R + r*Math.cos(phi))*Math.sin(theta);
                                    vertices.push(x,y,z);
                                }
                            }

                            // Generate triangulated faces
                            for(var i=0;i<nn;i++){
                                for(var j=0;j<m;j++){
                                    var a = i*m + j;
                                    var b = i*m + (j+1)%m;
                                    var c = ((i+1)%nn)*m + (j+1)%m;
                                    var d = ((i+1)%nn)*m + j;
                                    indices.push(a,b,c, a,c,d);
                                }
                            }

                            var geo = new THREE.BufferGeometry();
                            geo.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));
                            geo.setIndex(indices);
                            geo.computeVertexNormals();

                            var V = nn * m;
                            var F = 2 * nn * m;
                            var E = 3 * nn * m;
                            var chi = V - E + F;
                            return {geo:geo, V:V, E:E, F:F, chi:chi, verts:vertices};
                        }

                        function show(surfIdx, res){
                            if(group) scene.remove(group);
                            group = new THREE.Group();
                            curSurf = surfIdx;
                            curRes = res;

                            var data;
                            if(surfIdx === 0){
                                data = buildSphere(res);
                            } else {
                                data = buildTorus(res);
                            }

                            // Translucent mesh
                            group.add(new THREE.Mesh(data.geo, new THREE.MeshBasicMaterial({
                                color: surfIdx===0 ? 0xa78bfa : 0x22d3ee,
                                transparent:true, opacity:0.05, side:THREE.DoubleSide
                            })));

                            // Wireframe
                            group.add(new THREE.LineSegments(
                                new THREE.EdgesGeometry(data.geo),
                                new THREE.LineBasicMaterial({
                                    color: surfIdx===0 ? 0xa78bfa : 0x22d3ee,
                                    transparent:true, opacity:0.4
                                })
                            ));

                            // Vertex dots
                            var pg = new THREE.BufferGeometry();
                            pg.setAttribute('position', new THREE.Float32BufferAttribute(data.verts, 3));
                            group.add(new THREE.Points(pg, new THREE.PointsMaterial({
                                color: surfIdx===0 ? 0x22d3ee : 0xa78bfa,
                                size:3, sizeAttenuation:false
                            })));

                            scene.add(group);

                            // Labels
                            var name = surfIdx===0 ? 'Esfera (g=0)' : 'Toro (g=1)';
                            document.getElementById('surf-name').textContent = name;

                            var d = document.getElementById('chi-display');
                            var chiColor = data.chi === 2 ? '#a78bfa' : (data.chi === 0 ? '#22d3ee' : '#f87171');
                            var h = '<span style="color:#6b7280">V=</span><span style="color:#9ca3af">'+data.V+'</span>';
                            h += '<span style="color:#374151"> &nbsp; </span>';
                            h += '<span style="color:#6b7280">E=</span><span style="color:#9ca3af">'+data.E+'</span>';
                            h += '<span style="color:#374151"> &nbsp; </span>';
                            h += '<span style="color:#6b7280">F=</span><span style="color:#9ca3af">'+data.F+'</span>';
                            h += '<span style="color:#374151"> &nbsp;&nbsp; </span>';
                            h += '<span style="color:#6b7280">\u03C7 = '+data.V+' \u2212 '+data.E+' + '+data.F+' = </span>';
                            h += '<span style="color:'+chiColor+';font-weight:700;font-size:1.2em">'+data.chi+'</span>';
                            d.innerHTML = h;

                            // Update surface buttons
                            var btns = document.querySelectorAll('.surf-btn');
                            for(var b=0;b<btns.length;b++){
                                if(+btns[b].dataset.surf === surfIdx){
                                    btns[b].style.background = 'rgba(167,139,250,0.15)';
                                    btns[b].style.borderColor = '#a78bfa';
                                    btns[b].style.color = '#a78bfa';
                                } else {
                                    btns[b].style.background = '#111827';
                                    btns[b].style.borderColor = '#1f2937';
                                    btns[b].style.color = '#9ca3af';
                                }
                            }
                        }

                        // Controls
                        document.querySelectorAll('.surf-btn').forEach(function(btn){
                            btn.addEventListener('click', function(){
                                show(+this.dataset.surf, curRes);
                            });
                        });

                        var slider = document.getElementById('res-slider');
                        slider.addEventListener('input', function(){
                            curRes = +this.value;
                            document.getElementById('res-label').textContent = 'n = ' + curRes;
                            show(curSurf, curRes);
                        });

                        // Drag rotation
                        canvas.addEventListener('pointerdown', function(e){
                            dragging=true; px=e.clientX; py=e.clientY; autoRot=false;
                            clearTimeout(autoTimer); canvas.style.cursor='grabbing';
                        });
                        window.addEventListener('pointerup', function(){
                            dragging=false; canvas.style.cursor='grab';
                            autoTimer=setTimeout(function(){autoRot=true;},3000);
                        });
                        window.addEventListener('pointermove', function(e){
                            if(!dragging)return;
                            rotY+=(e.clientX-px)*0.008; rotX+=(e.clientY-py)*0.008;
                            px=e.clientX; py=e.clientY;
                        });

                        function resize(){
                            var w=canvas.clientWidth, h=canvas.clientHeight;
                            renderer.setSize(w,h,false);
                            camera.aspect=w/h; camera.updateProjectionMatrix();
                        }
                        window.addEventListener('resize', resize);
                        resize();

                        show(0, 8);
                        (function loop(){
                            requestAnimationFrame(loop);
                            if(autoRot) rotY += 0.004;
                            if(group) group.rotation.set(rotX, rotY, 0);
                            renderer.render(scene, camera);
                        })();
                    })();
                    </script>

                    <!-- Navigation -->
                    <div class="mt-12 pt-8 border-t border-gray-800 flex justify-between items-center">
                        <a href="./leccion-11.html" class="px-6 py-3 bg-gray-900 hover:bg-gray-800 text-gray-400 rounded-lg font-semibold transition">
                            &larr; Por Que Solo 5
                        </a>
                        <a href="../modulo-03/leccion-13.html" class="px-6 py-3 bg-violet-500/10 text-violet-400 hover:bg-violet-500/20 rounded-lg font-semibold transition">
                            Modulo 3: Dualidad &rarr;
                        </a>
                    </div>
                </article>
            </main>
        </div>
    </div>

    <!-- Footer -->
    <footer class="border-t border-gray-900 py-6 mt-12">
        <div class="max-w-6xl mx-auto px-6 text-center">
            <nav class="text-xs text-gray-600 mb-2">
                <a href="../../../../../_portal/index.html" class="hover:text-violet-400 transition">EigenLab</a>
                <span class="mx-1">/</span>
                <a href="../../../index.html" class="hover:text-violet-400 transition">Math Visual Lab</a>
                <span class="mx-1">/</span>
                <a href="../../index.html" class="hover:text-violet-400 transition">Platonic Lab</a>
                <span class="mx-1">/</span>
                <a href="../index.html" class="hover:text-violet-400 transition">Curso</a>
                <span class="mx-1">/</span>
                <span class="text-gray-500">Modulo 02</span>
            </nav>
            <p class="text-gray-700 text-sm mono">Modulo 02 &middot; La Formula de Euler</p>
        </div>
    </footer>
</body>
</html>